"use strict";(self["webpackChunkCustomsPedia"]=self["webpackChunkCustomsPedia"]||[]).push([[629],{26936:function(e,n,a){a.d(n,{A4:function(){return s},B2:function(){return d},Dr:function(){return c},E1:function(){return b},HV:function(){return g},Rk:function(){return r},SB:function(){return h},Wb:function(){return u},ZE:function(){return p},_I:function(){return m},n_:function(){return t},uQ:function(){return i}});var o=a(2324);const l="/api/v1";async function t(e){return(0,o.A)({url:l+"/knowledge/chatlog/list",method:"POST",data:{...e,pageNum:e.page,pageSize:e.perPage}})}async function i(e){return(0,o.A)({url:l+"/knowledge/chat/download",method:"POST",responseType:"blob",data:e})}async function s(e){return(0,o.A)({url:l+"/system/intellectsessionchatlog/logs/list",method:"POST",data:{...e,pageNum:e.page,pageSize:e.perPage}})}async function g(e){return(0,o.A)({url:l+"/system/documentchatlog/chatlog/list",method:"POST",data:{pageNum:e.page,pageSize:e.perPage,...e}})}async function r(e){return(0,o.A)({url:l+"/system/document-compare/logs/list",method:"POST",data:{pageNum:e.page,pageSize:e.perPage,...e}})}async function u(e){return(0,o.A)({url:l+"/system/intellectsessionchatlog/logs/download",method:"POST",responseType:"blob",data:e})}async function p(e){return(0,o.A)({url:l+"/system/documentchatlog/chatlog/download",method:"POST",responseType:"blob",data:e})}async function c(e){return(0,o.A)({url:l+"/system/document-compare/logs/download",method:"POST",responseType:"blob",data:e})}async function d(){return(0,o.A)({url:l+"/system/user/tree",method:"GET"})}async function m(e){return(0,o.A)({url:l+"/monitor/logininfor/list",method:"GET",params:{pageNum:e.page,pageSize:e.perPage,...e}})}async function b(e){return(0,o.A)({url:l+"/monitor/online/list",method:"GET",params:{pageNum:e.page,pageSize:e.perPage,...e}})}async function h(e){return(0,o.A)({url:l+"/monitor/logininfor/remove",method:"DELETE",data:e})}},44806:function(e,n,a){a.r(n),a.d(n,{default:function(){return P}});var o=a(28694),l=a(83487),t=a(38118),i=a(97913),s=a(74560),g=a(19477),r=a(12567),u=a(47679),p=a(94102),c=a(26936),d=a(32228),m=a(74913),b=a(98836);const h={class:"main"},f={class:"main-top"},y={class:"main-top-nav"},z={class:"main-top-online"},k={class:"main-top-batch"},v={class:"th-s-label"},w={class:"th-s-label"},R={class:"th-s"},S={class:"operation"};var F=(0,o.pM)({__name:"log-in",setup(e){const{t:n}=(0,d.s9)(),a=(0,m.Pj)(),F=((0,b.rd)(),(0,t.Kh)({reload:!0,loading:!1,list:[],pagination:{total:0,current:1,pageSize:10,sizeChange:()=>{},onChange:e=>{}}})),_=(0,t.KR)([]),{pushQuery:T,queryParams:P}=(0,p.A)("/organize/system/log-in",(async(e,n)=>{F.loading=!0;const a=await(0,c._I)(e),{rows:o,data:l}=a,t=o||l;F.list=t.map((e=>e)),F.pagination={total:a.total||0,current:e.page,pageSize:e.perPage,sizeChange:e=>E({perPage:e,page:1}),onChange:e=>E({page:e})},F.loading=!1})),A=(0,o.EW)((()=>0===_.value.length)),C=(0,t.KR)(!1),N=(0,t.Kh)({loginName:"",ipaddr:""}),L=(0,t.KR)(0),E=((0,t.KR)(!1),(0,t.KR)({name:"",code:"",description:""}),(0,t.Kh)({name:[{required:!0,message:n("page.organizes.config.rules.name"),trigger:"blur"}],code:[{required:!0,message:n("page.organizes.config.rules.code"),trigger:"blur"}],description:[{required:!0,message:n("page.organizes.config.rules.description"),trigger:"blur"}]}),(0,t.KR)(!1),e=>{const n={...N};T({...n,page:F.pagination.current,perPage:F.pagination.pageSize,...e})}),B=()=>{N.loginName="",N.ipaddr="",E({page:1})},K=(e,n)=>!0,I=async()=>{if(0===_.value.length)return void s.nk.warning(n("page.organizes.logs.login-batch-warning"));const e=_.value.map((e=>e.infoId)).join(","),a=n("page.organizes.logs.login-batch-detail"),o=n("page.organizes.logs.login-batch-hint");g.s.confirm(a,o,{confirmButtonText:n("page.organizes.docus.buttonSubmit"),cancelButtonText:n("page.organizes.docus.buttonCancel"),type:"warning"}).then((async()=>{C.value=!0,await(0,c.SB)({ids:e}),s.nk.success(n("page.organizes.docus.deleteSuccess")),C.value=!1})).catch((()=>{C.value=!1}))},O=e=>{_.value=e},V=async(e,a)=>{const o=n("page.organizes.logs.login-deleteDetail"),l=n("page.organizes.logs.login-deleteHint");g.s.confirm(o,l,{confirmButtonText:n("page.organizes.docus.buttonSubmit"),cancelButtonText:n("page.organizes.docus.buttonCancel"),type:"warning"}).then((async()=>{await(0,c.SB)({ids:e.infoId}),s.nk.success(n("page.organizes.docus.deleteSuccess"))})).catch((()=>{}))};return(0,o.sV)((async()=>{a.commit("global/setLefter",!0);const e=await(0,c.E1)({});e&&e.total&&(L.value=e.total||0)})),(0,o.hi)((()=>{a.commit("global/setLefter",!1)})),(e,a)=>{const s=(0,o.g2)("el-button"),g=(0,o.g2)("el-input"),p=(0,o.g2)("el-col"),c=(0,o.g2)("el-row"),d=(0,o.g2)("el-table-column"),m=(0,o.gN)("loading");return(0,o.uX)(),(0,o.CE)("div",h,[(0,o.Lk)("div",f,[(0,o.Lk)("div",y,(0,l.v_)((0,t.R1)(n)("page.organizes.logs.login-topNav")),1),(0,o.Lk)("div",z,(0,l.v_)((0,t.R1)(n)("page.organizes.logs.login-online",{online:L.value})),1),(0,o.Lk)("div",k,[(0,o.bo)(((0,o.uX)(),(0,o.Wv)(s,{disabled:A.value,onClick:I},{icon:(0,o.k6)((()=>[(0,o.bF)((0,t.R1)(r.A),{type:"pk-delete"})])),default:(0,o.k6)((()=>[(0,o.eW)(" "+(0,l.v_)((0,t.R1)(n)("page.organizes.logs.login-batchDel")),1)])),_:1},8,["disabled"])),[[m,e.bacthingDel]])])]),(0,o.bF)(u.A,{"row-key":"roleId",data:F.list,loading:F.loading,pagination:F.pagination,onHandleSelection:O},{header:(0,o.k6)((()=>[(0,o.bF)(c,{onKeydown:(0,i.jR)(E,["enter"])},{default:(0,o.k6)((()=>[(0,o.bF)(p,{span:6},{default:(0,o.k6)((()=>[(0,o.Lk)("span",v,(0,l.v_)((0,t.R1)(n)("page.organizes.logs.login-th-loginName")),1),(0,o.bF)(g,{modelValue:N.loginName,"onUpdate:modelValue":a[0]||(a[0]=e=>N.loginName=e),placeholder:(0,t.R1)(n)("page.organizes.logs.login-th-loginNameHolder")},null,8,["modelValue","placeholder"])])),_:1}),(0,o.bF)(p,{span:6},{default:(0,o.k6)((()=>[(0,o.Lk)("span",w,(0,l.v_)((0,t.R1)(n)("page.organizes.logs.login-th-loginIp")),1),(0,o.bF)(g,{modelValue:N.ipaddr,"onUpdate:modelValue":a[1]||(a[1]=e=>N.ipaddr=e),placeholder:(0,t.R1)(n)("page.organizes.logs.login-th-loginIpHolder")},null,8,["modelValue","placeholder"])])),_:1}),(0,o.bF)(p,{span:12},{default:(0,o.k6)((()=>[(0,o.Lk)("div",R,[(0,o.bF)(s,{onClick:B},{icon:(0,o.k6)((()=>[(0,o.bF)((0,t.R1)(r.A),{type:"pk-refresh"})])),default:(0,o.k6)((()=>[(0,o.eW)(" "+(0,l.v_)((0,t.R1)(n)("page.organizes.logs.login-reset")),1)])),_:1}),(0,o.bF)(s,{type:"primary",onClick:E},{icon:(0,o.k6)((()=>[(0,o.bF)((0,t.R1)(r.A),{type:"pk-search"})])),default:(0,o.k6)((()=>[(0,o.eW)(" "+(0,l.v_)((0,t.R1)(n)("page.organizes.logs.login-search")),1)])),_:1})])])),_:1})])),_:1})])),default:(0,o.k6)((()=>[(0,o.bF)(d,{type:"selection",width:"46",selectable:K}),(0,o.bF)(d,{type:"index",width:"66",label:(0,t.R1)(n)("page.organizes.docus.tb-label-no")},null,8,["label"]),(0,o.bF)(d,{prop:"loginName",label:(0,t.R1)(n)("page.organizes.logs.login-s-loginName"),width:"160"},null,8,["label"]),(0,o.bF)(d,{prop:"status",label:(0,t.R1)(n)("page.organizes.logs.login-s-loginStatus"),width:"160"},null,8,["label"]),(0,o.bF)(d,{prop:"msg",label:(0,t.R1)(n)("page.organizes.logs.login-s-type"),width:"160"},null,8,["label"]),(0,o.bF)(d,{prop:"ipaddr",label:(0,t.R1)(n)("page.organizes.logs.login-s-loginIp"),width:"160"},null,8,["label"]),(0,o.bF)(d,{prop:"loginTime",label:(0,t.R1)(n)("page.organizes.logs.login-s-loginTime"),width:"166"},null,8,["label"]),(0,o.bF)(d,{prop:"loginLocation",label:(0,t.R1)(n)("page.organizes.logs.login-s-loginLocation"),width:"160"},null,8,["label"]),(0,o.bF)(d,{prop:"browser",label:(0,t.R1)(n)("page.organizes.logs.login-s-loginBrowser"),width:"160"},null,8,["label"]),(0,o.bF)(d,{prop:"os",label:(0,t.R1)(n)("page.organizes.logs.login-s-loginSystem"),width:"160"},null,8,["label"]),(0,o.bF)(d,{label:(0,t.R1)(n)("page.organizes.logs.login-s-actions"),width:"120"},{default:(0,o.k6)((({row:e,$index:a})=>[(0,o.Lk)("div",S,[(0,o.bF)(s,{type:"text",onClick:n=>V(e,a)},{icon:(0,o.k6)((()=>[(0,o.bF)((0,t.R1)(r.A),{type:"pk-delete"})])),default:(0,o.k6)((()=>[(0,o.eW)(" "+(0,l.v_)((0,t.R1)(n)("page.organizes.logs.login-deleteButton")),1)])),_:2},1032,["onClick"])])])),_:1},8,["label"])])),_:1},8,["data","loading","pagination"])])}}}),_=a(83940);const T=(0,_.A)(F,[["__scopeId","data-v-ef29596c"]]);var P=T}}]);