"use strict";(self["webpackChunkSensepedia"]=self["webpackChunkSensepedia"]||[]).push([[878],{64878:function(e,r,n){n.r(r),n.d(r,{default:function(){return D}});var t=n(30882),o=n(28724),a=n(64614),i=n(79266),u=n(28694),s=n(38118),l=n(97913),c=n(83487),d=n(98836),p=n(74913),m=n(32228),f=n(74560),g=n(47531),v=n(12567);
/*! js-cookie v3.0.5 | MIT */
function b(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)e[t]=n[t]}return e}var k={read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function w(e,r){function n(n,t,o){if("undefined"!==typeof document){o=b({},r,o),"number"===typeof o.expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),n=encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var i in o)o[i]&&(a+="; "+i,!0!==o[i]&&(a+="="+o[i].split(";")[0]));return document.cookie=n+"="+e.write(t,n)+a}}function t(r){if("undefined"!==typeof document&&(!arguments.length||r)){for(var n=document.cookie?document.cookie.split("; "):[],t={},o=0;o<n.length;o++){var a=n[o].split("="),i=a.slice(1).join("=");try{var u=decodeURIComponent(a[0]);if(t[u]=e.read(i,u),r===u)break}catch(s){}}return r?t[r]:t}}return Object.create({set:n,get:t,remove:function(e,r){n(e,"",b({},r,{expires:-1}))},withAttributes:function(e){return w(this.converter,b({},this.attributes,e))},withConverter:function(e){return w(b({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(e)}})}var h=w(k,{path:"/"}),y=(n(81619),n(94301),n(1421)),x=n.n(y),R="MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAKoR8mX0rGKLqzcWmOzbfj64K8ZIgOdH",_=0x462d53c8abac0;function A(e){var r=x().AES.encrypt(e,R,{iv:_,mode:x().mode.ECB,padding:x().pad.Pkcs7});return r}function C(e){var r=x().AES.decrypt(e,R,{iv:_,mode:x().mode.ECB,padding:x().pad.Pkcs7});return r.toString(x().enc.Utf8).toString()}var M=n(95293),F=["redirect"],L=function(e){return(0,u.Qi)("data-v-2b6c2306"),e=e(),(0,u.jt)(),e},E={class:"main"},U={class:"left"},K=["src"],S={class:"right"},B=L((function(){return(0,u.Lk)("h1",{class:"title",style:{"mix-blend-mode":"darken"}},[(0,u.Lk)("img",{src:"/images/pk-logo.png"})],-1)})),W={class:"el-input__icon"},j={class:"el-input__icon"},I={class:"text-forget"},V=(0,u.pM)({__name:"index",setup:function(e){var r=(0,d.rd)(),n=r.currentRoute,b=(0,p.Pj)(),k=(0,m.s9)(),w=k.t,y=(0,u.EW)((function(){return"/"})),x=(0,s.Kh)({username:"",password:"",remeberMe:!1}),R=(0,s.Kh)({username:[{required:!0,message:w("page.user.login.form-item-username.required")}],password:[{required:!0,message:w("page.user.login.form-item-password.required")},{min:6,message:w("page.user.login.form-item-password.min")}]}),_=(0,s.KR)(),L=(0,s.KR)(!1),V=function(){var e=(0,i.A)((0,t.A)().mark((function e(){var i,u,s,l,c,d;return(0,t.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return L.value=!0,e.prev=1,e.next=4,null===(i=_.value)||void 0===i?void 0:i.validate();case 4:if(u=e.sent,!0!==u){e.next=11;break}return x.remeberMe?(h.set("username",x.username,{expires:30}),h.set("password",A(x.password),{expires:30}),h.set("remeberMe",x.remeberMe,{expires:30})):(h.remove("username"),h.remove("password"),h.remove("remeberMe")),e.next=9,b.dispatch("userlogin/login",{username:x.username,password:(0,M.w)(x.password),remeberMe:x.remeberMe});case 9:s=e.sent,!0===s&&(f.nk.success(w("page.user.login.form.login-success")),l=n.value.query,c=l.redirect,d=(0,a.A)(l,F),window.location.href=r.resolve({path:c||"/",query:(0,o.A)({open:"video"},d)}).href);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](1),console.log(e.t0),f.nk.warning(w("app.global.form.validatefields.catch"));case 17:L.value=!1;case 18:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}(),q=(0,u.EW)((function(){return b.state.userlogin.loginStatus})),Q=(0,u.EW)((function(){return b.state.userlogin.retryLimit||0})),D=(0,u.EW)((function(){return b.state.userlogin.retryMinute||0})),O=function(){var e=h.get("username"),r=h.get("password"),n=h.get("remeberMe");e&&r&&(x.username=void 0===e?x.username:e,x.password=void 0===r?x.password:C(r),x.remeberMe=void 0!==n&&Boolean(n))};O();var X=(0,s.KR)(!1),z=function(){X.value=!0,f.nk.success(w("page.user.login.form.forget-success"))};return function(e,r){var n=(0,u.g2)("el-input"),t=(0,u.g2)("el-form-item"),o=(0,u.g2)("el-checkbox"),a=(0,u.g2)("el-button"),i=(0,u.g2)("el-alert");return(0,u.uX)(),(0,u.CE)("div",E,[(0,u.Lk)("div",U,[(0,u.Lk)("img",{src:y.value+"images/login.png"},null,8,K)]),(0,u.Lk)("div",S,[B,(0,u.bF)((0,s.R1)(g.US),{class:"form",model:x,rules:R,ref_key:"formRef",ref:_},{default:(0,u.k6)((function(){return[(0,u.bF)(t,{label:"",prop:"username"},{default:(0,u.k6)((function(){return[(0,u.bF)(n,{class:"input",modelValue:x.username,"onUpdate:modelValue":r[0]||(r[0]=function(e){return x.username=e}),placeholder:(0,s.R1)(w)("page.user.login.form-item-username"),onKeydown:(0,l.jR)(V,["enter"])},{prefix:(0,u.k6)((function(){return[(0,u.Lk)("i",W,[(0,u.bF)((0,s.R1)(v.A),{type:"user"})])]})),_:1},8,["modelValue","placeholder"])]})),_:1}),(0,u.bF)(t,{label:"",prop:"password"},{default:(0,u.k6)((function(){return[(0,u.bF)(n,{class:"input",modelValue:x.password,"onUpdate:modelValue":r[1]||(r[1]=function(e){return x.password=e}),type:"password",placeholder:(0,s.R1)(w)("page.user.login.form-item-password"),onKeydown:(0,l.jR)(V,["enter"])},{prefix:(0,u.k6)((function(){return[(0,u.Lk)("i",j,[(0,u.bF)((0,s.R1)(v.A),{type:"pwd"})])]})),_:1},8,["modelValue","placeholder"])]})),_:1}),(0,u.bF)(t,null,{default:(0,u.k6)((function(){return[(0,u.bF)(o,{class:"text-align-right",modelValue:x.remeberMe,"onUpdate:modelValue":r[2]||(r[2]=function(e){return x.remeberMe=e})},{default:(0,u.k6)((function(){return[(0,u.eW)((0,c.v_)((0,s.R1)(w)("page.user.login.rememberMe")),1)]})),_:1},8,["modelValue"]),(0,u.Lk)("div",I,[(0,u.Lk)("span",{onClick:z},(0,c.v_)((0,s.R1)(w)("page.user.login.form.forget")),1)])]})),_:1}),(0,u.bF)(t,null,{default:(0,u.k6)((function(){return[(0,u.bF)(a,{type:"primary",class:"submit",onClick:V,loading:L.value},{default:(0,u.k6)((function(){return[(0,u.eW)((0,c.v_)((0,s.R1)(w)("page.user.login.form.btn-submit")),1)]})),_:1},8,["loading"])]})),_:1}),"error"!==q.value||L.value?(0,u.Q3)("",!0):((0,u.uX)(),(0,u.Wv)(i,{key:0,title:(0,s.R1)(w)("page.user.login.form.login-error"),type:"error","show-icon":"",closable:!1},null,8,["title"])),"limit"===q.value?((0,u.uX)(),(0,u.Wv)(i,{key:1,title:(0,s.R1)(w)("page.user.login.notMatch.retryLimit",{limit:Q.value,minute:D.value}),type:"error","show-icon":"",closable:!1},null,8,["title"])):(0,u.Q3)("",!0),"exceed"===q.value?((0,u.uX)(),(0,u.Wv)(i,{key:2,title:(0,s.R1)(w)("page.user.login.retryLimit.exceed",{minute:D.value}),type:"error","show-icon":"",closable:!1},null,8,["title"])):(0,u.Q3)("",!0)]})),_:1},8,["model","rules"])])])}}}),q=n(83940);const Q=(0,q.A)(V,[["__scopeId","data-v-2b6c2306"]]);var D=Q}}]);