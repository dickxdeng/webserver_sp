(self["webpackChunkSensepedia"]=self["webpackChunkSensepedia"]||[]).push([[864],{50783:function(){!function(e){const t=e["zh-cn"]=e["zh-cn"]||{};t.dictionary=Object.assign(t.dictionary||{},{"%0 of %1":"第 %0 步，共 %1 步","Align center":"居中","Align left":"左对齐","Align right":"右对齐",Aquamarine:"海蓝色",Big:"大",Black:"黑色","Block quote":"块引用",Blue:"蓝色",Bold:"加粗","Bulleted List":"项目符号列表","Bulleted list styles toolbar":"项目符号列表样式工具条",Cancel:"取消","Cannot upload file:":"无法上传的文件：","Centered image":"图片居中","Change image text alternative":"更改图片替换文本","Choose heading":"标题类型",Circle:"空心圆点",Column:"列","Could not insert image at the current position.":"无法在当前位置插入图片","Could not obtain resized image URL.":"无法获取重设大小的图片URL",Decimal:"阿拉伯数字","Decimal with leading zero":"前导零阿拉伯数字","Decrease indent":"减少缩进",Default:"默认","Delete column":"删除本列","Delete row":"删除本行","Dim grey":"暗灰色",Disc:"实心圆点","Document colors":"文档中的颜色",Downloadable:"可下载","Dropdown toolbar":"下拉工具栏","Edit link":"修改链接","Editor toolbar":"编辑器工具栏","Enter image caption":"输入图片标题","Font Background Color":"字体背景色","Font Color":"字体颜色","Font Family":"字体","Font Size":"字体大小","Full size image":"图片通栏显示",Green:"绿色",Grey:"灰色","Header column":"标题列","Header row":"标题行",Heading:"标题","Heading 1":"标题 1","Heading 2":"标题 2","Heading 3":"标题 3","Heading 4":"标题 4","Heading 5":"标题 5","Heading 6":"标题 6",Huge:"极大","Image toolbar":"图片工具栏","image widget":"图像小部件","Increase indent":"增加缩进","Insert column left":"左侧插入列","Insert column right":"右侧插入列","Insert image":"插入图像","Insert image or file":"插入图片或文件","Insert media":"插入媒体","Insert paragraph after block":"在后面插入段落","Insert paragraph before block":"在前面插入段落","Insert row above":"在上面插入一行","Insert row below":"在下面插入一行","Insert table":"插入表格","Inserting image failed":"插入图片失败",Italic:"倾斜",Justify:"两端对齐","Left aligned image":"图片左侧对齐","Light blue":"浅蓝色","Light green":"浅绿色","Light grey":"浅灰色",Link:"超链接","Link URL":"链接网址","Lower-latin":"小写拉丁字母","Lower–roman":"小写罗马数字","Media URL":"媒体URL","media widget":"媒体小部件","Merge cell down":"向下合并单元格","Merge cell left":"向左合并单元格","Merge cell right":"向右合并单元格","Merge cell up":"向上合并单元格","Merge cells":"合并单元格",Next:"下一步","Numbered List":"项目编号列表","Numbered list styles toolbar":"项目编号列表样式工具条","Open in a new tab":"在新标签页中打开","Open link in new tab":"在新标签页中打开链接",Orange:"橙色",Paragraph:"段落","Paste the media URL in the input.":"在输入中粘贴媒体URL",Previous:"上一步",Purple:"紫色",Red:"红色",Redo:"重做","Remove color":"移除颜色","Rich Text Editor, %0":"富文本编辑器， %0","Right aligned image":"图片右侧对齐",Row:"行",Save:"保存","Select all":"全选","Select column":"选择列","Select row":"选择行","Selecting resized image failed":"选择重设大小的图片失败","Show more items":"显示更多","Side image":"图片侧边显示",Small:"小","Split cell horizontally":"水平分割单元格","Split cell vertically":"垂直拆分单元格",Square:"实心方块",Strikethrough:"删除线","Table toolbar":"表格工具栏","Text alignment":"对齐","Text alignment toolbar":"对齐工具栏","Text alternative":"替换文本","The URL must not be empty.":"URL不可以为空。","This link has no URL":"此链接没有设置网址","This media URL is not supported.":"不支持此媒体URL。",Tiny:"极小","Tip: Paste the URL into the content to embed faster.":"提示：将URL粘贴到内容中可更快地嵌入","Toggle the circle list style":"切换空心原点列表样式","Toggle the decimal list style":"切换阿拉伯数字列表样式","Toggle the decimal with leading zero list style":"切换前导零阿拉伯数字列表样式","Toggle the disc list style":"切换实心原点列表样式","Toggle the lower–latin list style":"切换小写拉丁字母列表样式","Toggle the lower–roman list style":"切换小写罗马数字列表样式","Toggle the square list style":"切换实心方块列表样式","Toggle the upper–latin list style":"切换大写拉丁字母列表样式","Toggle the upper–roman list style":"切换大写罗马数字列表样式",Turquoise:"青色",Underline:"下划线",Undo:"撤销",Unlink:"取消超链接","Upload failed":"上传失败","Upload in progress":"正在上传","Upper-latin":"大写拉丁字母","Upper-roman":"大写罗马数字",White:"白色","Widget toolbar":"小部件工具栏",Yellow:"黄色"}),t.getPluralForm=function(e){return 0}}(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={}))},51832:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});n(58926),n(14898),n(33434),n(78952);var a=n(38118),r=n(28694),u=n(32228);function o(){var e=(0,u.s9)(),t=e.locale,n={"zh-CN":[{value:"zh-cn",label:"简体中文"},{value:"zh-tw",label:"繁体中文"},{value:"en-us",label:"英文"},{value:"default",label:"其他"}],"zh-TW":[{value:"zh-cn",label:"简体中文"},{value:"zh-tw",label:"繁体中文"},{value:"en-us",label:"English"},{value:"default",label:"其他"}],"en-US":[{value:"zh-cn",label:"Chinese (Simplified)"},{value:"zh-tw",label:"Chinese (Traditional)"},{value:"en-us",label:"English"},{value:"default",label:"Others"}],"th-TH":[{value:"zh-cn",label:"简体中文"},{value:"zh-tw",label:"繁体中文"},{value:"en-us",label:"English"},{value:"default",label:"其他"}]},o="zh-CN",i={"zh-CN":{"zh-cn":"简体中文","zh-hk":"繁体中文","en-us":"English",default:"其他"},"zh-TW":{"zh-cn":"簡體中文","zh-hk":"繁體中文","en-us":"English",default:"其他"},"en-US":{"zh-cn":"Chinese (Simplified)","zh-hk":"Chinese (Traditional)","en-us":"English",default:"Others"}},l={"zh-CN":{0:"文本",1:"文本",2:"QA"},"zh-TW":{0:"文本",1:"文本",2:"QA"},"en-US":{0:"Text",1:"Text",2:"Q&A"}},c={DOCUMENT_WAIT_CONFIRM:1,DOCUMENT_WAIT_PUBLISH:2,DOCUMENT_PUBLISHED:3,DOCUMENT_STOP:4,DOCUMENT_DUPL:5,DOCUMENT_PUBLISH_FAILED:6,DOCUMENT_PUBLISH_ING:7,DOCUMENT_SPLITTING:8,DOCUMENT_SPLIT_SUCCESS:9,DOCUMENT_SPLIT_FAILED:10},s={UPLOAD:-1,NOT_READY:0,START:1,RUNNING:2,READY:3,ERROR:4,SPLIT:5,SPLIT_ERROR:6,TOKEN_EXCEED:7,TOKEN_LIMIT:8},d={"zh-CN":["上传中","待解析","解析中","解析失败","待校验","待上架","已上架","上架中","上架失败","切分中","切分失败","其他"],"zh-TW":["上傳中","待解析","解析中","解析失败","待校验","待上架","已上架","上架中","上架失敗","切分中","切分失敗","其他"],"en-US":["Uploading","Awaiting Parsing","Parsing","Parse Failed","Awaiting Verification","Awaiting Publish","Published","Publishing","Publish Failed","Splitting","Split Failed","Others"]},p={"zh-CN":["","通用问答","文档问答前","文档问答后","知识库问答"],"zh-TW":["","通用問答","文檔問答前","文檔問答後","知識庫問答"],"en-US":["","General Chat","Document Chat - Before Upload","Document Chat - After Upload","Knowledge Base Chat"]},v={"zh-CN":[{label:"全部",value:"ALL"},{label:"简体中文",value:"zh-cn"},{label:"繁体中文",value:"zh-hk"},{label:"英文",value:"en-us"},{label:"其他",value:"default"}],"zh-TW":[{label:"全部",value:"ALL"},{label:"簡體中文",value:"zh-cn"},{label:"繁體中文",value:"zh-hk"},{label:"英文",value:"en-us"},{label:"其他",value:"default"}],"en-US":[{label:"ALL",value:"ALL"},{label:"Chinese (Simplified)",value:"zh-cn"},{label:"Chinese (Traditional)",value:"zh-hk"},{label:"English",value:"en-us"},{label:"Others",value:"default"}]},m={"zh-CN":[{label:"全部",value:"ALL"},{label:"文本类型",value:"1"},{label:"QA类型",value:"2"}],"zh-TW":[{label:"全部",value:"ALL"},{label:"文本類型",value:"1"},{label:"QA類型",value:"2"}],"en-US":[{label:"ALL",value:"ALL"},{label:"Text",value:"1"},{label:"QA",value:"2"}]},f={"zh-CN":[{label:"全部",value:0},{label:"待解析",value:1},{label:"解析中",value:2},{label:"解析失败",value:3},{label:"待校验",value:4},{label:"待上架",value:5},{label:"已上架",value:6},{label:"上架中",value:7},{label:"上架失败",value:8},{label:"切分中",value:9},{label:"切分失败",value:10}],"zh-TW":[{label:"全部",value:0},{label:"待解析",value:1},{label:"解析中",value:2},{label:"解析失敗",value:3},{label:"待校驗",value:4},{label:"待上架",value:5},{label:"已上架",value:6},{label:"上架中",value:7},{label:"上架失敗",value:8},{label:"切分中",value:9},{label:"切分失敗",value:10}],"en-US":[{label:"ALL",value:0},{label:"Awaiting Parsing",value:1},{label:"Parsing",value:2},{label:"Parse Failed",value:3},{label:"Awaiting Verification",value:4},{label:"Awaiting Publish",value:5},{label:"Published",value:6},{label:"Publishing",value:7},{label:"Published Failed",value:8},{label:"Splitting",value:9},{label:"Splitted Failed",value:10}]},h={"zh-CN":[{label:"全部",value:0},{label:"通用问答",value:1},{label:"单文档问答前",value:2},{label:"单文档问答后",value:3},{label:"知识库问答",value:4},{label:"文档问答 - 文档对比",value:5}],"zh-TW":[{label:"全部",value:0},{label:"通用問答",value:1},{label:"單文檔問答前",value:2},{label:"單文檔問答後",value:3},{label:"知識庫問答",value:4},{label:"文檔問答 - 文檔對比",value:5}],"en-US":[{label:"ALL",value:0},{label:"General Chat",value:1},{label:"Document Chat - Before Upload",value:2},{label:"Document Chat - After Upload",value:3},{label:"Knowledge Base Chat",value:4},{label:"Document Chat - Document Comparison",value:5}]},k=function(){return t.value in n?n[t.value]:n[o]},g=function(){return t.value in i?i[t.value]:i[o]},b=function(){return t.value in v?v[t.value]:v[o]},w=function(){return t.value in l?l[t.value]:l[o]},y=function(){return t.value in m?m[t.value]:m[o]},A=function(){return t.value in d?d[t.value]:d[o]},x=function(){return t.value in f?f[t.value]:f[o]},R=function(){return t.value in p?p[t.value]:p[o]},_=function(){return t.value in h?h[t.value]:h[o]},E=function(e,t){if(e=~~e,t=~~t,t===s.UPLOAD)return 0;if(t===s.NOT_READY)return 1;if(t<=s.START)return 1;if(t===s.RUNNING)return 2;if(t===s.ERROR)return 3;if(t>=s.READY){if(e===c.DOCUMENT_WAIT_CONFIRM)return 4;if(e===c.DOCUMENT_WAIT_PUBLISH)return 5;if(e===c.DOCUMENT_PUBLISHED)return 6;if(e===c.DOCUMENT_STOP)return 5;if(e===c.DOCUMENT_PUBLISH_ING)return 7;if(e===c.DOCUMENT_PUBLISH_FAILED)return 8;if(e===c.DOCUMENT_SPLITTING)return 9;if(e===c.DOCUMENT_SPLIT_FAILED)return 10;if(e===c.DOCUMENT_SPLIT_SUCCESS)return 5}return 3},C=function(e){return 1===e?{parserStates:s.NOT_READY+","+s.START,states:""}:2===e?{parserStates:s.RUNNING,states:""}:3===e?{parserStates:s.ERROR+","+s.TOKEN_EXCEED+","+s.TOKEN_LIMIT,states:""}:4===e?{parserStates:s.READY+","+s.SPLIT,states:c.DOCUMENT_WAIT_CONFIRM}:5===e?{parserStates:"",states:c.DOCUMENT_WAIT_PUBLISH+","+c.DOCUMENT_STOP+","+c.DOCUMENT_SPLIT_SUCCESS}:6===e?{parserStates:"",states:c.DOCUMENT_PUBLISHED}:7===e?{parserStates:"",states:c.DOCUMENT_PUBLISH_ING}:8===e?{parserStates:"",states:c.DOCUMENT_PUBLISH_FAILED}:9===e?{parserStates:"",states:c.DOCUMENT_SPLITTING}:10===e?{parserStates:"",states:c.DOCUMENT_SPLIT_FAILED}:{}},L=(0,a.Kh)([]),T=(0,a.Kh)({}),I=(0,a.Kh)({}),S=(0,a.Kh)({}),F=(0,a.Kh)([]),U=(0,a.Kh)([]),N=(0,a.Kh)([]),D=(0,a.Kh)([]);return A().map((function(e){L.push(e)})),Object.keys(w()).map((function(e){T[e]=w()[e]})),Object.keys(g()).map((function(e){I[e]=g()[e]})),Object.keys(R()).map((function(e){S[e]=R()[e]})),x().map((function(e){U.push(e)})),b().map((function(e){F.push(e)})),y().map((function(e){N.push(e)})),_().map((function(e){D.push(e)})),(0,r.wB)((function(){return t.value}),(function(){L.splice(0,L.length),A().map((function(e){L.push(e)})),Object.keys(T).map((function(e){T[e]=w()[e]})),Object.keys(I).map((function(e){I[e]=g()[e]})),U.splice(0,U.length),x().map((function(e){U.push(e)})),F.splice(0,F.length),b().map((function(e){F.push(e)})),N.splice(0,N.length),y().map((function(e){N.push(e)})),D.splice(0,D.length),_().map((function(e){D.push(e)}))})),{getLocaleOutputLang:k,getLocaleLangs:g,getLocaleTypes:w,getLocaleStatus:A,getLocaleLangOptions:b,getLocaleTypeOptions:y,getLocaleStatusOptions:x,translateState:E,queryState:C,STATES:L,TYPES:T,LANGS:I,SCOPES:S,StatusOptions:U,LangOptions:F,TypeOptions:N,ScopeOptions:D,STATE_PREV:c,STATE_NEXT:s}}},18684:function(e,t,n){"use strict";n.d(t,{A:function(){return s}});var a=n(28694),r=n(83487),u=n(38118),o={key:1},i=(0,a.pM)({__name:"Tooltip",props:{content:{},placement:{},className:{},showArrow:{type:Boolean,default:!0},offset:{default:0}},setup:function(e){var t=(0,a.Ht)(),n=(0,u.KR)(!0),i=(0,u.KR)(null),l=function(){if(i.value){var e,t=null===(e=i.value)||void 0===e||null===(e=e.parentNode)||void 0===e||null===(e=e.parentNode)||void 0===e?void 0:e.offsetWidth,a=i.value.offsetWidth;n.value=!(a>t)}};return function(e,c){var s=(0,a.g2)("el-tooltip");return(0,a.uX)(),(0,a.Wv)(s,{class:"el-tooltip",effect:"light",disabled:n.value,content:e.content,placement:e.placement,"show-arrow":e.showArrow,offset:e.offset},{default:(0,a.k6)((function(){return[(0,a.Lk)("span",{class:"over-flow",onMouseover:l},[(0,a.Lk)("span",{ref_key:"refName",ref:i,class:(0,r.C4)(e.className)},[(0,u.R1)(t).default?(0,a.RG)(e.$slots,"default",{key:0}):((0,a.uX)(),(0,a.CE)("span",o,(0,r.v_)(e.content||"-"),1))],2)],32)]})),_:3},8,["disabled","content","placement","show-arrow","offset"])}}}),l=n(83940);const c=(0,l.A)(i,[["__scopeId","data-v-7d8873d0"]]);var s=c},25343:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Cn}});var a=n(94470),r=n(15400),u=n(28724),o=n(30882),i=n(79266),l=(n(71171),n(96919),n(91234),n(64536),n(20897),n(4500),n(19382),n(58926),n(14898),n(14046),n(29306),n(78952),n(81619),n(27015),n(73780),n(44480),n(65218),n(88556),n(11657),n(94848),n(89736),n(55864),n(63307),n(43854),n(34817),n(28694)),c=n(83487),s=n(38118),d=n(97913),p=n(98836),v=n(74913),m=n(32228),f=n(19477),h=n(74560),k=n(87591),g=n(47531),b=n(35153),w=n.n(b),y=n(18232),A=n(12567),x=n(47307),R=n(52379),_=n(92301),E={class:"main-chat-abstract"},C={key:0,class:"expand"},L={class:"abtitle"},T={class:"abname"},I={class:"abstra"},S=["textContent"],F=["textContent"],U={class:"operations"},N={class:"operation"},D={class:"operation"},q={class:"operation"},W={class:"operation"},K={class:"operation regenerate"},O={key:0,class:"inpand-hide"},X=(0,l.pM)({__name:"DocumentAbstract",props:{id:{},history:{},historyAbstract:{},abExpand:{type:Boolean}},emits:["regenerateAb","showAbExpand","refreshAbstract"],setup:function(e,t){var n=t.emit,a=(0,m.s9)(),r=a.t,u=r("page.document.abstract.empty"),d=(0,l.EW)((function(){return g.historyAbstract.loading?r("page.document.abstract.loading"):void 0})),p=(0,l.EW)((function(){return 1===g.historyAbstract.score})),v=(0,l.EW)((function(){return 2===g.historyAbstract.score})),f=(0,l.EW)((function(){return g.historyAbstract.comment||""})),k=(0,s.KR)(!1),g=e,b=n,w=(0,s.KR)(!1),y=(0,s.KR)({comment:""}),x=function(){b("regenerateAb")},X=function(){var e=(0,i.A)((0,o.A)().mark((function e(){return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,R.L)("".concat(g.historyAbstract.abstract)||"");case 3:k.value=!0,h.nk.success(r("page.qa.main.copySuccess")),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),h.nk.error(r("page.qa.main.copyError"));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=(0,i.A)((0,o.A)().mark((function e(){var t;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,_.lr)({id:g.historyAbstract.id,docId:g.history.docId,score:1});case 2:t=e.sent,t&&t.data&&b("refreshAbstract",t.data),h.nk.success(r("page.qa.main.likeSuccess"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=(0,i.A)((0,o.A)().mark((function e(){var t;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,_.lr)({id:g.historyAbstract.id,docId:g.history.docId,score:2});case 2:t=e.sent,t&&t.data&&b("refreshAbstract",t.data),h.nk.success(r("page.qa.main.globalSuccess"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=(0,i.A)((0,o.A)().mark((function e(){var t;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,_.lr)({id:g.historyAbstract.id,docId:g.history.docId,comment:y.value.comment});case 2:t=e.sent,t&&t.data&&b("refreshAbstract",t.data),h.nk.success(r("page.qa.main.globalSuccess"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){w.value=!0};return function(e,t){var n,a,o=(0,l.g2)("el-input"),i=(0,l.g2)("el-form-item"),m=(0,l.g2)("el-form"),h=(0,l.g2)("el-button"),g=(0,l.g2)("el-dialog"),b=(0,l.gN)("loading");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",E,[e.abExpand?((0,l.uX)(),(0,l.CE)("div",C,[(0,l.Lk)("div",L,[(0,l.eW)((0,c.v_)((0,s.R1)(r)("page.document.abstract.prefix")),1),(0,l.Lk)("span",T,(0,c.v_)((null===(n=e.history)||void 0===n?void 0:n.docName)||(null===(a=e.history)||void 0===a?void 0:a.name)),1),(0,l.eW)((0,c.v_)((0,s.R1)(r)("page.document.abstract.suffix")),1)]),(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",I,[(0,l.Lk)("div",{class:"abstract",textContent:(0,c.v_)(e.historyAbstract.abstract||d.value||(0,s.R1)(u))},null,8,S),(0,l.Lk)("div",{class:"summary",textContent:(0,c.v_)(e.historyAbstract.summary)},null,8,F)])),[[b,e.historyAbstract.loading]]),(0,l.Lk)("div",U,[(0,l.Lk)("div",N,[p.value?((0,l.uX)(),(0,l.Wv)((0,s.R1)(A.A),{key:1,type:"pk-liked",class:"operation-icon",onClick:B})):((0,l.uX)(),(0,l.Wv)((0,s.R1)(A.A),{key:0,type:"pk-like",class:"operation-icon",onClick:B}))]),(0,l.Lk)("div",D,[v.value?((0,l.uX)(),(0,l.Wv)((0,s.R1)(A.A),{key:1,type:"pk-unliked",class:"operation-icon",onClick:P})):((0,l.uX)(),(0,l.Wv)((0,s.R1)(A.A),{key:0,type:"pk-unlike",class:"operation-icon",onClick:P}))]),(0,l.Lk)("div",q,[f.value?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)((0,s.R1)(A.A),{key:0,type:"pk-feedback",class:"operation-icon",onClick:z}))]),(0,l.Lk)("div",W,[k.value?((0,l.uX)(),(0,l.Wv)((0,s.R1)(A.A),{key:1,type:"pk-copy",class:"operation-icon",onClick:X})):((0,l.uX)(),(0,l.Wv)((0,s.R1)(A.A),{key:0,type:"pk-copy",class:"operation-icon",onClick:X}))]),(0,l.Lk)("div",K,[(0,l.Lk)("a",{onClick:x},(0,c.v_)((0,s.R1)(r)("page.qa.message.regenerate")),1)])])])):(0,l.Q3)("",!0),(0,l.bF)(g,{modelValue:w.value,"onUpdate:modelValue":t[2]||(t[2]=function(e){return w.value=e})},{footer:(0,l.k6)((function(){return[(0,l.bF)(h,{onClick:t[1]||(t[1]=function(e){return w.value=!1})},{default:(0,l.k6)((function(){return[(0,l.eW)((0,c.v_)((0,s.R1)(r)("page.qa.main.cancelButton")),1)]})),_:1}),(0,l.bF)(h,{type:"primary",onClick:M},{default:(0,l.k6)((function(){return[(0,l.eW)((0,c.v_)((0,s.R1)(r)("page.qa.main.confirmButton")),1)]})),_:1})]})),default:(0,l.k6)((function(){return[(0,l.bF)(m,{model:y.value,ref:"feedbackFormRef"},{default:(0,l.k6)((function(){return[(0,l.bF)(i,null,{default:(0,l.k6)((function(){return[(0,l.bF)(o,{modelValue:y.value.comment,"onUpdate:modelValue":t[0]||(t[0]=function(e){return y.value.comment=e}),type:"textarea",placeholder:"Enter your feedback"},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model"])]})),_:1},8,["modelValue"])]),e.abExpand?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",O))],64)}}}),B=n(83940);const P=(0,B.A)(X,[["__scopeId","data-v-4b12d5c1"]]);var M=P,z=(n(77111),n(47715),n(69989)),H=n(97053),V=n(49284),Q=n(57668),j=n(18684),G=n(51832),Y=n(17299),J={class:"list-chat"},$={key:0,class:"list-chat-nodata"},Z=["src"],ee=["onClick"],te={key:0,class:"list-chat-item-desc"},ne={class:"list-chat-item-icon"},ae={class:"list-chat-item-onlineT"},re={key:0,class:"list-chat-item-onlineD"},ue={key:1,class:"list-chat-item-onlineD"},oe={key:1,class:"list-chat-item-title"},ie={class:"list-chat-item-icon"},le={class:"list-chat-item-onlineT"},ce={key:0,class:"list-chat-item-onlineD"},se={key:1,class:"list-chat-item-onlineD"},de={key:2,class:"list-chat-item-op"},pe=(0,l.pM)({__name:"DocumentList",props:{filter:{}},emits:["loadData","stopLLM"],setup:function(e,t){var n=t.emit,a=(0,m.s9)(),r=a.t,u=(0,v.Pj)(),p=e,k=(0,G.A)(),g=k.STATE_NEXT,b=n,w=(0,l.EW)((function(){return"/"})),y=(0,l.EW)((function(){var e=u.state.pk_document.history;if(p.filter){var t=e.filter((function(e){return null===e||void 0===e?void 0:e.name.includes(p.filter)}));return t}return e})),R=(0,l.EW)((function(){return u.state.pk_document.active})),E=function(){var e=(0,i.A)((0,o.A)().mark((function e(t){var n;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.uuid,!O(n)){e.next=3;break}return e.abrupt("return");case 3:R.value&&u.commit("pk_document/updateHistory",{uuid:R.value,type:"update",isEdit:!1}),b("loadData",{uuid:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=(0,i.A)((0,o.A)().mark((function e(t,n,a){var i,l,c,s,d,p,v;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.uuid,l=t.name,c=t.conversationType,null===a||void 0===a||a.stopPropagation(),!i){e.next=11;break}return s="compare"===c?_.LE:_.lU,e.next=6,s({id:i,docId:i,name:l});case 6:e.sent,u.commit("pk_document/updateHistory",{uuid:i,type:"update",docName:l,isEdit:n}),h.nk.success(r("page.qa.main.modifySuccess")),e.next=18;break;case 11:return d="compare"===c?_.IO:_.W5,e.next=14,d({name:l});case 14:p=e.sent,v=p.data.id,u.commit("pk_document/updateHistory",{uuid:v,type:"add",isEdit:n}),h.nk.success(r("page.qa.main.createSuccess"));case 18:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),L=function(e,t,n){var a=e.uuid;a&&u.commit("pk_document/updateHistory",{uuid:a,type:"update",isEdit:t})},T=function(){var e=(0,i.A)((0,o.A)().mark((function e(t,n){var a,l,c,s;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.uuid,l=t.conversationType,null===n||void 0===n||n.stopPropagation(),c=[],"compare"!==l&&y.value.forEach((function(e){e.docIds&&e.docIds.includes(a)&&c.push(e.uuid)})),s=r("page.qa.main.deleteHintDetail"),c.length>0&&(s=r("page.qa.main.deleteHintDocsDetail")),f.s.confirm(s,r("page.qa.main.deleteHint"),{confirmButtonText:r("page.qa.main.confirmButton"),cancelButtonText:r("page.qa.main.cancelButton"),type:r("page.qa.main.deleteType")}).then((0,i.A)((0,o.A)().mark((function e(){var t;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="compare"===l?_.dy:_.Nn,e.next=3,t({docIds:a,ids:a});case 3:if(b("stopLLM",{uuid:a}),u.commit("pk_document/deleteHistory",{uuid:a}),"compare"===l){e.next=10;break}if(!(c&&c.length>0)){e.next=9;break}return e.next=9,(0,_.dy)({ids:c.join(",")});case 9:c.forEach((function(e){u.commit("pk_document/deleteHistory",{uuid:e})}));case 10:case"end":return e.stop()}}),e)})))).catch((function(){}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),I=function(e){return"compare"===e.conversationType?"pk-compareh":(0,x.$)(e.sourceUrl||e.name)},S=(0,Q.s)(T,600),F=!1,U=!1,N=function(){var e=(0,i.A)((0,o.A)().mark((function e(t,n){var a,r,u;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.uuid,r=t.name,u=t.conversationType,!F){e.next=4;break}return F=!1,e.abrupt("return");case 4:if(!U){e.next=6;break}return e.abrupt("return");case 6:return U=!0,e.next=9,C({uuid:a,name:r,conversationType:u},n);case 9:U=!1;case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),D=function(e,t){var n=e.uuid;F=!0,n&&u.commit("pk_document/updateHistory",{uuid:n,type:"update",isEdit:t})},q=function(e){return e.parserState===g.TOKEN_EXCEED?r("page.document.preview.error-exceed"):e.parserState===g.TOKEN_LIMIT?r("page.document.preview.error-zero"):r("page.document.preview.error-parser")},W=function(e){return e.parserState===g.ERROR||e.parserState===g.TOKEN_EXCEED||e.parserState===g.TOKEN_LIMIT},K=function(e){return e.parserState===g.NOT_READY||e.parserState===g.START||e.parserState===g.RUNNING},O=function(e){return R.value===e};return(0,l.sV)((function(){setTimeout((function(){return(0,Y.eo)()})),(0,Y.Ru)()})),(0,l.hi)((function(){(0,Y.zg)()})),function(e,t){var n=(0,l.g2)("el-tooltip");return(0,l.uX)(),(0,l.Wv)((0,s.R1)(z.kA),null,{default:(0,l.k6)((function(){return[(0,l.Lk)("div",J,[y.value.length?((0,l.uX)(!0),(0,l.CE)(l.FK,{key:1},(0,l.pI)(y.value,(function(e,t){return(0,l.uX)(),(0,l.CE)("div",{key:t},[(0,l.Lk)("a",{class:(0,c.C4)(["list-chat-item",O(e.uuid)&&"active"]),onClick:function(t){return E(e)}},[e.isEdit?((0,l.uX)(),(0,l.CE)("div",oe,[(0,l.Lk)("div",ie,[(0,l.bF)((0,s.R1)(A.A),{type:I(e),class:"w24 h24"},null,8,["type"])]),(0,l.Lk)("div",{class:(0,c.C4)(["list-chat-item-online",K(e)?"loading":""])},[(0,l.Lk)("div",le,[(0,l.bF)((0,s.R1)(H.WK),{class:"input",modelValue:e.name,"onUpdate:modelValue":function(t){return e.name=t},onBlur:function(t){return N(e,!1)},onKeypress:(0,d.jR)((function(t){return N(e,!1)}),["enter"]),onKeydown:(0,d.jR)((function(t){return D(e,!1)}),["esc"]),placeholder:(0,s.R1)(r)("page.document.list.inputHolder")},null,8,["modelValue","onUpdate:modelValue","onBlur","onKeypress","onKeydown","placeholder"])]),W(e)?((0,l.uX)(),(0,l.CE)("div",se,[(0,l.bF)(n,{content:e.name,effect:"light",placement:"bottom-start","show-arrow":!1},{default:(0,l.k6)((function(){return[(0,l.bF)((0,s.R1)(A.A),{type:"pk-docerror",class:"wh20"})]})),_:2},1032,["content"]),(0,l.eW)(" "+(0,c.v_)((0,s.R1)(r)("page.document.error.parser-hint")),1)])):((0,l.uX)(),(0,l.CE)("div",ce,(0,c.v_)(e.createdAt),1))],2)])):((0,l.uX)(),(0,l.CE)("div",te,[(0,l.Lk)("div",ne,[(0,l.bF)((0,s.R1)(A.A),{type:I(e),class:"w24 h24"},null,8,["type"])]),(0,l.Lk)("div",{class:(0,c.C4)(["list-chat-item-online",W(e)?"loading":""])},[(0,l.Lk)("div",ae,[(0,l.bF)(j.A,{content:e.name,placement:"bottom-start","show-arrow":!1},null,8,["content"])]),W(e)?((0,l.uX)(),(0,l.CE)("div",ue,[(0,l.bF)(n,{content:q(e),effect:"light",placement:"bottom-start","show-arrow":!1},{default:(0,l.k6)((function(){return[(0,l.bF)((0,s.R1)(A.A),{type:"pk-docerror",class:"wh"})]})),_:2},1032,["content"]),(0,l.eW)(" "+(0,c.v_)((0,s.R1)(r)("page.document.error.parser-hint")),1)])):((0,l.uX)(),(0,l.CE)("div",re,(0,c.v_)(e.createdAt),1))],2)])),O(e.uuid)?((0,l.uX)(),(0,l.CE)("div",de,[e.isEdit?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.bF)((0,s.R1)(V.S2),{class:"list-chat-item-opU",onClick:function(t){return L(e,!0,t)}},{default:(0,l.k6)((function(){return[(0,l.bF)((0,s.R1)(A.A),{type:"pk-edit",class:"wh20"})]})),_:2},1032,["onClick"]),(0,l.bF)((0,s.R1)(V.S2),{class:"list-chat-item-opD",onClick:function(t){return(0,s.R1)(S)(e,t)}},{default:(0,l.k6)((function(){return[(0,l.bF)((0,s.R1)(A.A),{type:"pk-delete",class:"wh20"})]})),_:2},1032,["onClick"])],64))])):(0,l.Q3)("",!0)],10,ee)])})),128)):((0,l.uX)(),(0,l.CE)("div",$,[(0,l.Lk)("img",{src:w.value+"images/nodata.svg",width:"176px",height:"115px"},null,8,Z),(0,l.eW)(" "+(0,c.v_)((0,s.R1)(r)("page.document.list.nodata")),1)]))])]})),_:1})}}});const ve=(0,B.A)(pe,[["__scopeId","data-v-578c4778"]]);var me=ve,fe=(n(10348),n(83330),n(28215),n(50641),n(87434),n(91563)),he={key:0,class:"chat-message-divider"},ke={class:"chat-message-header"},ge=["src"],be={class:"chat-message-body"},we={class:"chat-message-body-text"},ye={key:0,class:"chat-message-chunks"},Ae={key:0,class:"chat-message-footer"},xe={class:"chat-message-footer-right"},Re={class:"chat-message-footer-rightr"},_e=["onClick"],Ee={class:"dialog-footer"},Ce=(0,l.pM)({__name:"DocumentMessage",props:{id:{},createdAt:{},text:{},conversationType:{},owner:{},error:{type:Boolean},loading:{type:Boolean},like:{type:Boolean},unlike:{type:Boolean},feedback:{type:Boolean},topk:{},status:{},continueNumber:{},preConversationId:{}},emits:["regenerate","handleClick","delete","like","unlike","feedback","continue"],setup:function(e,t){var n=t.emit,a=(0,m.s9)(),d=a.t,p=(0,v.Pj)(),f=e,k=n,b=(0,s.KR)("me"===f.owner),w=(0,s.KR)(null),y=(0,s.KR)(!1),x=(0,s.KR)(d("page.qa.message.feedback")),E=(0,s.KR)(d("page.qa.message.feedbackList").split(",")),C=(0,s.KR)(null),L=(0,s.Kh)({value:""}),T=(0,s.Kh)({value:[{required:!0,message:d("page.qa.message.feedbackPlaceholder"),trigger:"blur"}]}),I=(0,l.EW)((function(){return p.state.global.canFeedback})),S=(0,l.EW)((function(){var e,t,n=null===(e=f.text)||void 0===e?void 0:e.match(/(\[)ref_\d+(\])/g);if(n)return(0,r.A)(new Set(n));var a=null===(t=f.text)||void 0===t?void 0:t.match(/chunk id \d+/g);return a?(0,r.A)(new Set(a)):[]})),F=(0,l.EW)((function(){return S.value.map((function(e){return Number(e.replaceAll(/[^0-9]/gi,""))}))})),U=(0,l.EW)((function(){try{return Object.values(JSON.parse(f.topk))}catch(e){console.log(e)}return[]})),N=(0,l.EW)((function(){for(var e=[],t=0;t<F.value.length;t++){var n=Number(F.value[t]);U.value[n-1]&&e.push((0,u.A)({id:t+1,nu:n},U.value[n-1]))}return e})),D=(0,l.EW)((function(){var e,t=(null===(e=f.text)||void 0===e?void 0:e.replace(/<br\/>|<br>/g,"\n"))||"";t=t.replaceAll("\\boxed","");for(var n=0;n<N.value.length;n++){var a="";t=t.replaceAll("[ref_".concat(N.value[n].nu,"]"),'<span class="el-index" data-title="'.concat(a,'" data-id="').concat(n,'">').concat(N.value[n].id,"</span>"))}return 2===f.status?t+='<span class="stop">'.concat(d("page.qa.main.stopText"),"</span>"):5===f.status&&Number(f.continueNumber||0)<3?t+='<a class="limit">'.concat(d("page.qa.main.limitText"),"</a>"):6===f.status&&(t=d("page.qa.message.error")),t.replace(/\[ref_\d+\]/g,"")||d("page.qa.answer.error")})),q=(0,l.EW)((function(){var e,t=null===(e=f.text)||void 0===e?void 0:e.replaceAll("<br/>","\n");return t.replace(/\[ref_\d+\]/g,"")||d("page.qa.answer.error")})),W=(0,l.EW)((function(){return f.like})),K=(0,l.EW)((function(){return f.unlike})),O=(0,l.EW)((function(){return f.feedback})),X=(0,l.EW)((function(){return!1})),B=function(){var e=(0,i.A)((0,o.A)().mark((function e(t){var n;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=N.value.find((function(e){return e.id=t})),k("handleClick",n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=(0,i.A)((0,o.A)().mark((function e(){var t;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!f.id||f.like){e.next=6;break}return t="compare"===f.conversationType?_.kk:_.HL,e.next=4,t({id:f.id,score:1});case 4:k("like",f.id),h.nk.success(d("page.qa.main.likeSuccess"));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=(0,i.A)((0,o.A)().mark((function e(){var t;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!f.id||f.unlike){e.next=6;break}return t="compare"===f.conversationType?_.kk:_.Sn,e.next=4,t({id:f.id,score:2});case 4:k("unlike",f.id),h.nk.success(d("page.qa.main.globalSuccess"));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=(0,i.A)((0,o.A)().mark((function e(){return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:f.id&&!f.feedback&&(y.value=!0),L.value="";case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=(0,i.A)((0,o.A)().mark((function e(){var t,n,a;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,n=null===(t=C.value)||void 0===t?void 0:t.validate(),n){e.next=4;break}return e.abrupt("return");case 4:return a="compare"===f.conversationType?_.kk:_.H9,e.next=7,a({id:f.id,comment:L.value});case 7:k("feedback",f.id||0,L.value),h.nk.success(d("page.qa.main.submitSuccess")),y.value=!1,e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](0),y.value=!1,console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),Q=function(e){L.value=e},j=function(e){switch(e){case"clipboard":$();break;case"delete":k("delete");break;case"asText":b.value=!b.value;break}},G=function(){var e;null===(e=w.value)||void 0===e||e.scrollIntoView(),k("regenerate")},Y=function(){var e=(0,i.A)((0,o.A)().mark((function e(t,n){var a;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=N.value[t],k("handleClick",a);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),J=function(){var e=(0,i.A)((0,o.A)().mark((function e(){return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:k("continue");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=(0,i.A)((0,o.A)().mark((function e(){return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,R.L)(q.value||"");case 3:h.nk.success(d("page.qa.main.copySuccess")),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),h.nk.error(d("page.qa.main.copyError"));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return console.log(f),(0,l.sV)((0,i.A)((0,o.A)().mark((function e(){return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))),function(e,t){var n=(0,l.g2)("el-divider"),a=(0,l.g2)("el-tag"),r=(0,l.g2)("el-form-item"),u=(0,l.g2)("el-input"),o=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.CE)(l.FK,null,["me"===f.owner&&-1===e.preConversationId?((0,l.uX)(),(0,l.CE)("div",he,[(0,l.bF)(n,{"content-position":"center"},{default:(0,l.k6)((function(){return[(0,l.eW)((0,c.v_)((0,s.R1)(d)("page.qa.main.divider")),1)]})),_:1})])):(0,l.Q3)("",!0),(0,l.Lk)("div",{ref_key:"messageRef",ref:w,class:(0,c.C4)(["chat-message","me"===f.owner?"reverse":""])},[(0,l.Lk)("div",ke,[(0,l.Lk)("img",{src:"me"===f.owner?"/images/GroupQ.png":"/images/GroupA.png",width:"40",height:"40"},null,8,ge)]),(0,l.Lk)("div",be,[(0,l.Lk)("div",we,[(0,l.bF)(fe.A,{ref:"textRef",owner:e.owner,error:e.error,text:D.value,loading:e.loading,"as-raw-text":b.value,UUID:e.id,onHandleChunk:Y,onHandleLimit:J},null,8,["owner","error","text","loading","as-raw-text","UUID"]),N.value&&N.value.length?((0,l.uX)(),(0,l.CE)("div",ye,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(N.value,(function(e,t){return(0,l.uX)(),(0,l.CE)("div",{class:"chunks-list",key:t},[(0,l.bF)(a,{class:"chunk-index",type:"primary",onClick:function(t){return B(e.id)}},{default:(0,l.k6)((function(){return[(0,l.eW)((0,c.v_)(e.id),1)]})),_:2},1032,["onClick"])])})),128))])):(0,l.Q3)("",!0)]),e.id?((0,l.uX)(),(0,l.CE)("div",Ae,["me"===f.owner?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[],64)):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[I.value?((0,l.uX)(),(0,l.Wv)((0,s.R1)(V.S2),{key:0,type:"text",onClick:P},{default:(0,l.k6)((function(){return[W.value?((0,l.uX)(),(0,l.Wv)((0,s.R1)(A.A),{key:1,type:"pk-liked",class:"wh18"})):((0,l.uX)(),(0,l.Wv)((0,s.R1)(A.A),{key:0,type:"pk-like",class:"wh18 hover"}))]})),_:1})):(0,l.Q3)("",!0),I.value?((0,l.uX)(),(0,l.Wv)((0,s.R1)(V.S2),{key:1,type:"text",onClick:M},{default:(0,l.k6)((function(){return[K.value?((0,l.uX)(),(0,l.Wv)((0,s.R1)(A.A),{key:1,type:"pk-unliked",class:"wh18 hover"})):((0,l.uX)(),(0,l.Wv)((0,s.R1)(A.A),{key:0,type:"pk-unlike",class:"wh18 hover"}))]})),_:1})):(0,l.Q3)("",!0),I.value&&!O.value?((0,l.uX)(),(0,l.Wv)((0,s.R1)(V.S2),{key:2,type:"text",onClick:z},{default:(0,l.k6)((function(){return[(0,l.bF)((0,s.R1)(A.A),{type:"pk-feedback",class:"wh18 hover"})]})),_:1})):(0,l.Q3)("",!0),(0,l.bF)((0,s.R1)(V.S2),{type:"text",onClick:t[0]||(t[0]=function(e){return j("clipboard")})},{default:(0,l.k6)((function(){return[X.value?((0,l.uX)(),(0,l.Wv)((0,s.R1)(A.A),{key:1,type:"pk-copied",class:"wh18 hover"})):((0,l.uX)(),(0,l.Wv)((0,s.R1)(A.A),{key:0,type:"pk-copy",class:"wh18 hover"}))]})),_:1}),(0,l.Lk)("div",xe,[(0,l.Lk)("div",Re,[(0,l.bF)((0,s.R1)(V.S2),{type:"text",onClick:G},{default:(0,l.k6)((function(){return[(0,l.eW)((0,c.v_)((0,s.R1)(d)("page.qa.message.regenerate")),1)]})),_:1})])])],64))])):(0,l.Q3)("",!0)]),(0,l.bF)(o,{modelValue:y.value,"onUpdate:modelValue":t[3]||(t[3]=function(e){return y.value=e}),title:x.value,width:"25rem"},{footer:(0,l.k6)((function(){return[(0,l.Lk)("div",Ee,[(0,l.bF)((0,s.R1)(V.S2),{onClick:t[2]||(t[2]=function(e){return y.value=!1})},{default:(0,l.k6)((function(){return[(0,l.eW)((0,c.v_)((0,s.R1)(d)("page.qa.main.cancelButton")),1)]})),_:1}),(0,l.bF)((0,s.R1)(V.S2),{type:"primary",onClick:H},{default:(0,l.k6)((function(){return[(0,l.eW)((0,c.v_)((0,s.R1)(d)("page.qa.main.submitButton")),1)]})),_:1})])]})),default:(0,l.k6)((function(){return[(0,l.bF)((0,s.R1)(g.US),{model:L,rules:T,ref_key:"feedbackRef",ref:C},{default:(0,l.k6)((function(){return[(0,l.bF)(r,null,{default:(0,l.k6)((function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(E.value,(function(e){return(0,l.uX)(),(0,l.CE)("span",{class:"span",key:e,onClick:function(t){return Q(e)}},(0,c.v_)(e),9,_e)})),128))]})),_:1}),(0,l.bF)(r,{label:"",props:"value"},{default:(0,l.k6)((function(){return[(0,l.bF)(u,{modelValue:L.value,"onUpdate:modelValue":t[1]||(t[1]=function(e){return L.value=e}),type:"textarea",autosize:{minRows:4,maxRows:4}},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"])]})),_:1},8,["modelValue","title"])],2)],64)}}});const Le=(0,B.A)(Ce,[["__scopeId","data-v-566ff54e"]]);var Te=Le,Ie=n(50239),Se=(n(50783),function(e){return(0,l.Qi)("data-v-a34d67c0"),e=e(),(0,l.jt)(),e}),Fe={class:"dialog-header"},Ue={class:"error-hint"},Ne=Se((function(){return(0,l.Lk)("span",null,"/",-1)})),De={class:"dialog-footer"},qe="The total token count of the two documents must not exceed",We=(0,l.pM)({__name:"CompareDialog",props:{modelValue:{type:Boolean}},emits:["update:modelValue","handleCreateCompare"],setup:function(e,t){var n=t.emit,a=((0,p.rd)(),(0,v.Pj)()),r=(0,m.s9)(),u=r.t,d=(0,G.A)(),f=d.STATE_NEXT,k=(0,l.EW)((function(){return a.state.global.maxToken})),g=(0,l.EW)((function(){return x.value.reduce((function(e,t){return e+t.tokenNum}),0)})),b=e,w=n,y=(0,s.KR)([]),x=(0,s.KR)([]),R=(0,s.KR)(null),E=(0,s.KR)(b.modelValue),C=function(e){return e.sourceFile.includes(".md")?"pk-md":e.sourceFile.includes(".xlsx")?"pk-xlsx":e.sourceFile.includes(".ppt")?"pk-ppt":e.sourceFile.includes(".docx")?"pk-docx":e.sourceFile.includes(".txt")?"pk-txt":"pk-pdf"},L=function(e,t){var n=e.length;if(n>2)return h.nk.error(u("page.document.compare.error")),void R.value.toggleRowSelection(t);x.value=e},T=function(e){return!(x.value.length>2)},I=function(){E.value=!1},S=function(){if(2===x.value.length){var e=x.value[0].tokenNum+x.value[1].tokenNum;e>k.value?h.nk.error(u("page.document.compare.tokenNumError",{maxToken:k.value,currentToken:e})):(w("handleCreateCompare",x.value),R.value.clearSelection())}else h.nk.error(u("page.document.compare.error"))},F=function(){var e=(0,i.A)((0,o.A)().mark((function e(){var t;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,_.ME)();case 2:t=e.sent,t&&t.data&&(y.value=t.data.filter((function(e){return e.parserState===f.READY})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,l.wB)((function(){return b.modelValue}),function(){var e=(0,i.A)((0,o.A)().mark((function e(t){return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,F();case 3:E.value=b.modelValue;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,l.wB)((function(){return E.value}),(function(e){w("update:modelValue",E.value)})),(0,l.sV)((0,i.A)((0,o.A)().mark((function e(){return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:case"end":return e.stop()}}),e)})))),function(e,t){var n=(0,l.g2)("el-table-column"),a=(0,l.g2)("el-table"),r=(0,l.g2)("el-button"),o=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.Wv)(o,{modelValue:E.value,"onUpdate:modelValue":t[0]||(t[0]=function(e){return E.value=e}),title:(0,s.R1)(u)("page.document.compare.dialogTitle")},{default:(0,l.k6)((function(){return[(0,l.Lk)("div",Fe,(0,c.v_)((0,s.R1)(u)("page.document.compare.dialogHeader")),1),(0,l.bF)(a,{ref_key:"table",ref:R,data:y.value,border:"",stripe:!0,onSelect:L},{default:(0,l.k6)((function(){return[(0,l.bF)(n,{type:"selection",selectable:T}),(0,l.bF)(n,{prop:"docName",label:(0,s.R1)(u)("page.organizes.docus.tb-label-name"),"min-width":"240"},{default:(0,l.k6)((function(e){var t=e.row;return[(0,l.bF)((0,s.R1)(A.A),{type:C(t),class:"icon-svg"},null,8,["type"]),(0,l.eW)(" "+(0,c.v_)(t.docName),1)]})),_:1},8,["label"]),(0,l.bF)(n,{prop:"tokenNum",label:(0,s.R1)(u)("page.document.compare.tokenNum"),width:"120"},null,8,["label"])]})),_:1},8,["data"]),(0,l.Lk)("div",Ue,[(0,l.Lk)("span",null,(0,c.v_)(qe)),(0,l.Lk)("span",null,(0,c.v_)(k.value),1),(0,l.Lk)("span",{class:(0,c.C4)({red:g.value>k.value})},"("+(0,c.v_)(g.value),3),Ne,(0,l.Lk)("span",null,(0,c.v_)(k.value)+")",1)]),(0,l.Lk)("div",De,[(0,l.bF)(r,{onClick:I},{default:(0,l.k6)((function(){return[(0,l.eW)((0,c.v_)((0,s.R1)(u)("page.organizes.docus.buttonCancel")),1)]})),_:1}),(0,l.bF)(r,{disabled:g.value>k.value||g.value<10,type:"primary",onClick:S},{default:(0,l.k6)((function(){return[(0,l.eW)((0,c.v_)((0,s.R1)(u)("page.document.compare.buttonChat")),1)]})),_:1},8,["disabled"])])]})),_:1},8,["modelValue","title"])}}});const Ke=(0,B.A)(We,[["__scopeId","data-v-a34d67c0"]]);var Oe=Ke,Xe=n(52582),Be=n(70579),Pe=n(76412),Me=n(53775);function ze(e,t){var n,a=(0,m.s9)(),r=a.t,u=(0,v.Pj)(),l=0,c=function(){var n=(0,i.A)((0,o.A)().mark((function n(){return(0,o.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:l&&(clearInterval(l),l=0),l=setInterval((0,i.A)((0,o.A)().mark((function n(){var a,r,i;return(0,o.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=u.state.pk_document.urlState.status,r=u.state.pk_document.active,!(a<=2&&r)){n.next=26;break}return n.prev=3,n.next=6,(0,_.S5)({docId:r});case 6:if(i=n.sent,!i||!i.data){n.next=18;break}if(!(i.data.parserState>2)){n.next=18;break}return u.commit("pk_document/changeUrlState",{url:i.data.sourceFile,status:i.data.parserState,docId:i.data.docId}),u.commit("pk_document/changePdfState",{pdfUrl:i.data.pdfFile,status:i.data.state}),u.commit("pk_document/updateHistory",{uuid:r,state:i.data.parserState,sourceUrl:i.data.sourceFile,type:"update",createdAt:i.data.createTime}),clearInterval(l),t(),n.next=16,(0,_.z)({docId:i.data.docId});case 16:i=n.sent,e(i);case 18:n.next=24;break;case 20:n.prev=20,n.t0=n["catch"](3),clearInterval(l),console.log(n.t0);case 24:n.next=27;break;case 26:clearInterval(l);case 27:case"end":return n.stop()}}),n,null,[[3,20]])}))),5e3);case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),s=function(){var a=(0,i.A)((0,o.A)().mark((function a(i){var l,s,d,p;return(0,o.A)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return l=i.file,s=new FormData,s.append("file",l),a.next=5,(0,_.W5)(s);case 5:if(d=a.sent,!d||!d.data){a.next=29;break}if(1!==d.data.code&&5!==d.data.code){a.next=11;break}h.nk.error(r("page.document.upload.dupl")),a.next=27;break;case 11:if(u.commit("pk_document/addHistory",{uuid:d.data.docId,name:l.name,docId:d.data.docId,sourceUrl:d.data.sourceFile,pdfUrl:d.data.pdfFile,state:1,isEdit:!1,createdAt:d.data.updateTime}),u.commit("pk_document/changeUrlState",{openPreview:!0,url:d.data.sourceFile,status:d.data.parserState,docId:d.data.docId}),u.commit("pk_document/changePdfState",{openPreview:!0,pdfUrl:"",status:d.data.parserState}),u.commit("pk_document/saveActive",{uuid:d.data.docId,status:d.data.parserState}),3!==d.data.parserState){a.next=25;break}return t(),e({loading:!0,data:{id:0,digest:"",summarize:"",question:""}}),a.next=20,(0,_.z)({docId:d.data.docId});case 20:p=a.sent,e(p),n.close(),a.next=26;break;case 25:d.data.parserState<=2&&(c(),e({loading:!0,data:{id:0,digest:"",summarize:"",question:""}}));case 26:h.nk.success(r("app.global.upload.success"));case 27:return n.close(),a.abrupt("return",d.data.doc_id);case 29:return n.close(),h.nk.error(r("app.global.upload.fail")+d.msg),a.abrupt("return",null);case 32:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),d=function(e){var t=52428800,a=e.size,u=e.name,o=e.name.split(".").pop();return a>t?(h.nk.error(r("app.global.upload.limit")),!1):["docx","pdf","md","txt"].includes(o)?u.match(/\[|\]|\^|\$|￥/g)?(h.nk.error("The file name contains special characters, please try again"),!1):void(n=Me.Ks.service({target:".upload-loading"})):(h.nk.error("Error Type"),!1)},p=function(){h.nk.error(r("app.global.upload.exceed"))};return{interval:c,httpRequest:s,beforeUpload:d,handleExceed:p}}var He=n(85158),Ve=n(81329),Qe=n(49302),je=function(e){return(0,l.Qi)("data-v-913fcb9a"),e=e(),(0,l.jt)(),e},Ge={class:"main"},Ye={class:"left-chat"},Je={class:"qa"},$e={class:"qa-header"},Ze={class:"qa-header-title"},et={class:"qa-main"},tt={class:"qa-main-create"},nt={class:"qa-main-create-one"},at={class:"icon"},rt={class:"iconsvg"},ut={class:"text"},ot={class:"desc"},it={class:"qa-main-create-know hide"},lt={class:"icon"},ct=je((function(){return(0,l.Lk)("span",{class:"icon"},[(0,l.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"17",viewBox:"0 0 17 17",fill:"none"},[(0,l.Lk)("path",{d:"M1.77075 2.83333C1.77075 2.44213 2.08788 2.125 2.47909 2.125H6.72909L8.49992 4.25H14.5208C14.912 4.25 15.2291 4.56712 15.2291 4.95833V14.1667C15.2291 14.5579 14.912 14.875 14.5208 14.875H2.47909C2.08788 14.875 1.77075 14.5579 1.77075 14.1667V2.83333Z",stroke:"#4E5969","stroke-width":"1.2","stroke-linejoin":"round"}),(0,l.Lk)("path",{d:"M8.5001 7.08301L9.29449 8.82296L11.1948 9.04081L9.78544 10.334L10.1655 12.2085L8.5001 11.2678L6.8347 12.2085L7.21476 10.334L5.80542 9.04081L7.7057 8.82296L8.5001 7.08301Z",stroke:"#4E5969","stroke-width":"1.2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)})),st={class:"text"},dt={key:0,class:"qa-main-create-compare qa-main-create"},pt={class:"icon"},vt={class:"iconsvg"},mt={class:"text"},ft={class:"desc"},ht={class:"qa-main-list"},kt={key:0,class:"main-chat main-chat-empty"},gt={class:"main-chat-empty-nodata"},bt=je((function(){return(0,l.Lk)("div",{class:"main-chat-empty-left"},[(0,l.Lk)("img",{src:"/images/GroupA.png",width:"40",height:"40"})],-1)})),wt={class:"main-chat-empty-right"},yt={class:"main-chat-empty-title"},At={class:"main-chat-empty-desc"},xt={class:"main-chat-empty-hint"},Rt={class:"main-chat-empty-uploadList"},_t={class:"icon"},Et=["src"],Ct={class:"title"},Lt={class:"text"},Tt={class:"desc"},It={key:1,class:"main-chat-loading"},St={key:0,class:"icon"},Ft={key:1,class:"text"},Ut={key:2,class:"desc"},Nt={key:3,class:"desc"},Dt={key:4,class:"desc"},qt={key:5,class:"desc"},Wt={key:6,class:"desc"},Kt={key:7,class:"desc"},Ot={key:8,class:"desc"},Xt={key:2,class:"main-chat-preview"},Bt={id:"scrollRef",ref:"scrollRef",class:"main-chat"},Pt={class:"main-chat-grow"},Mt={class:"main-chat-message main-chat-no-message"},zt={class:"main-chat-no-messageLeft"},Ht={class:"main-chat-no-messageRight",style:{gap:"16px"}},Vt={class:"main-chat-content"},Qt={class:"main-chat-grow"},jt={id:"chatMessage",class:"main-chat-message"},Gt={key:0,class:"expand"},Yt={key:1,class:"inpand"},Jt={key:1},$t={key:2,class:"main-chat-no-message"},Zt=je((function(){return(0,l.Lk)("div",{class:"main-chat-no-messageLeft"},[(0,l.Lk)("img",{src:"/images/GroupA.png",width:"40",height:"40"})],-1)})),en={class:"main-chat-no-messageRight"},tn={class:"main-chat-no-messageTitle"},nn={class:"main-chat-no-messageDesc"},an={class:"main-chat-footer mt-24"},rn={key:0,class:"question hide"},un={class:"label"},on=["title","onClick"],ln={class:"main-chat-footer-op"},cn={class:"main-chat-footer-opNormal"},sn={class:"normal-datah1"},dn=["onClick"],pn={class:"normal-data-item-operation"},vn=["onClick"],mn=["onClick"],fn={class:"normal-data-item addplus"},hn={class:"main-chat-footer-operation"},kn={class:"el-dropdown-link"},gn={class:"main-chat-footer-operation flex-grow"},bn={class:"main-chat-footer-input"},wn={class:"main-chat-footer-button"},yn={class:"dialog-footer"},An={class:"chunk-content"},xn="pk_document",Rn=3,_n=(0,l.pM)({__name:"index",setup:function(e){var t=(0,s.Kh)({id:"",abstract:"",summary:"",question:"",score:-1,comment:"",loading:!1}),n=function(e){"loading"in e?t.loading=e.loading:e&&_e.value!==e.data.docId||(e&&e.data&&(t.id=e.data.id,t.abstract=e.data.digest,t.summary=e.data.summarize,t.question=e.data.question,t.score=e.data.score,t.comment=e.data.comment),le.value=!1,t.loading=!1)},b=(0,s.KR)(!1),R=function(){b.value=!1},E=(0,Be.Y)(xn),C=E.addChat,L=E.updateChat,T=E.updateChatSome,I=E.getChatByUuidAndIndex,S=(0,Pe.A)(),F=S.scrollbarRef,U=S.scrollToBottom,N=S.scrollToBottomIfAtBottom,D=ze(n,R),q=D.interval,W=D.httpRequest,K=D.beforeUpload,O=D.handleExceed,X=(0,G.A)(),B=X.STATE_NEXT,P=(0,s.KR)(),z=(0,s.KR)(),H=new AbortController,V="",Q={docId:"",preConversationId:null,maxNewTokens:2048,temperature:.1,regenerate:{isRegenerate:!1},knowledgeScope:{basicAbility:1,privateDatabase:1},config:{topP:.95,stopSequence:"",repetitionPenalty:0,frequencyPenalty:0}},J=(0,p.rd)(),$=(J.currentRoute,(0,v.Pj)()),Z=(0,m.s9)(),ee=Z.t;$.commit("global/setMenuEnable",!0);var te=(0,l.EW)((function(){return $.state.global.maxToken})),ne=((0,s.KR)(!1),(0,s.KR)("")),ae=((0,s.KR)(!1),(0,s.KR)([{icon:"/images/docx.png",iconsvg:"pk-documentupload",text:"page.document.main.create",description:"page.document.main.createDesc",enable:!0}])),re=(0,s.KR)([]),ue=(0,s.KR)(!1),oe=(0,s.Kh)({id:0,content:"",scope:Rn}),ie=(0,l.EW)((function(){return $.state.global.openDocumentCompare})),le=(0,s.KR)(!0),ce=(0,s.KR)(),se=(0,s.KR)(!1),de=(0,s.KR)(!1),pe=(0,s.KR)(14),ve=(0,s.KR)(0),fe=(0,s.KR)(!1),he=(0,s.KR)(0),ke=(0,s.KR)(!0),ge=(0,s.KR)(null),be=(0,s.KR)(!1),we=(0,s.KR)(!1),ye=((0,s.KR)([]),(0,s.KR)("")),Ae=(0,s.KR)(null),xe=(0,s.KR)("prompt"),Re=(0,l.EW)((function(){return"prompting"===xe.value||!ye.value||0===ye.value.length})),_e=(0,l.EW)((function(){var e=$.state.pk_document.active;return e})),Ee=(0,l.EW)((function(){return $.state.pk_document.history.find((function(e){return e.uuid===_e.value}))})),Ce=(0,l.EW)((function(){var e=$.state.pk_document.history.find((function(e){return e.uuid===_e.value}));return e?e.chats:[]})),Le=(0,l.EW)((function(){return $.state.pk_document.history})),Se=(0,s.KR)({title:ee("page.document.empty.title"),subtitle:ee("page.document.empty.desc"),hint:ee("page.document.empty.hint")}),Fe=(0,s.KR)({title:ee("page.document.start.title"),subtitle:ee("page.document.start.desc")}),Ue=(0,s.KR)($.state.pk_document.urlState.urlWithRes||""),Ne=(0,l.EW)((function(){return $.state.pk_document.urlState.openPreview})),De=(0,l.EW)((function(){return $.state.pk_document.urlState.status<=B.RUNNING||$.state.pk_document.urlState.status===B.ERROR||$.state.pk_document.urlState.status===B.TOKEN_EXCEED||$.state.pk_document.urlState.status===B.TOKEN_LIMIT})),qe=(0,l.EW)((function(){return $.state.pk_document.urlState.url||""})),We=(0,l.EW)((function(){return $.state.pk_document.urlState.docId})),Ke=((0,l.EW)((function(){return(0,x.C)($.state.pk_document.urlState.url)})),(0,s.KR)($.state.pk_document.pdfState.pdfUrlWithRes||"")),Me=((0,s.KR)(!1),(0,l.EW)((function(){return $.state.pk_document.pdfState.pdfUrl})),(0,s.KR)("")),je=(0,s.KR)(""),_n=(0,s.KR)(!1),En=((0,l.EW)((function(){return"/preview/pdfjs/web/viewer.html?file="+encodeURIComponent(Ue.value)+"&pagemode=none"})),(0,l.EW)((function(){var e,n=null===(e=t.question)||void 0===e?void 0:e.split("\n");return n}))),Cn=(0,s.Kh)({content:[{required:!0,message:ee("page.qa.normalData.placeholder"),trigger:"blur"}]}),Ln=function(e){t.score=e.score,t.comment=e.comment},Tn=function(){var e=(0,i.A)((0,o.A)().mark((function e(){var n;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.loading=!0,e.prev=1,n={},!t.id){e.next=9;break}return e.next=6,(0,_.Pz)({id:t.id,docId:We.value});case 6:n=e.sent,e.next=12;break;case 9:return e.next=11,(0,_.z)({docId:We.value});case 11:n=e.sent;case 12:n&&n.data&&(t.id=n.data.id,t.abstract=n.data.digest,t.summary=n.data.summarize,t.question=n.data.question,t.score=n.data.score,t.comment=n.data.comment),e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](1),console.error(e.t0);case 18:t.loading=!1;case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}}(),In=function(){ke.value=!0,F.value.wrapRef.scrollTop=0},Sn=function(){var e=(0,i.A)((0,o.A)().mark((function e(t){var n,a;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return b.value=!0,e.prev=1,(0,Y.cY)(0,40),e.next=5,W(t);case 5:ve.value=-1,setTimeout((function(){return(0,Y.cY)(0,40)}),0),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),console.error(e.t0);case 12:null===(n=P.value)||void 0===n||n.clearFiles(),null===(a=z.value)||void 0===a||a.clearFiles();case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),Fn=function(e){e.stopPropagation();var t=e.key;t&&"Enter"===t&&console.log("enter")},Un=function(){var e=(0,i.A)((0,o.A)().mark((function e(t){var n,a,r;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.map((function(e){return e.docId})).join(","),a=t.map((function(e){return e.docName})).join("/"),e.next=4,(0,_.RL)({docIds:n,name:a});case 4:r=e.sent,$.commit("pk_document/addHistory",{uuid:r.data.id,name:r.data.name,conversationType:"compare",docIds:r.data.docIds,docs:t,state:4,createdAt:r.data.updateTime}),$.commit("pk_document/changeUrlState",{openPreview:!0,url:t[0].sourceFile,status:t[0].parserState,docId:t[0].docId}),$.commit("pk_document/saveActive",{uuid:r.data.id,status:B.READY}),we.value=!1;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Nn=function(){we.value=!0},Dn=function(){var e=(0,i.A)((0,o.A)().mark((function e(t){return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:ye.value=t,Jn(!1),ye.value="";case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qn=function(){var e=(0,i.A)((0,o.A)().mark((function e(){var t,n;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===(t=ce.value)||void 0===t?void 0:t.validate();case 3:if(n=e.sent,n){e.next=6;break}return e.abrupt("return");case 6:if(!oe.id){e.next=11;break}return e.next=9,(0,_.v8)(oe);case 9:e.next=14;break;case 11:return oe.id=0,e.next=14,(0,_.p1)(oe);case 14:return e.next=16,Ra();case 16:e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](0),console.log(e.t0);case 21:return e.prev=21,ue.value=!1,e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[0,18,21,24]])})));return function(){return e.apply(this,arguments)}}(),Wn=function(e){ye.value=e.content||"",ge.value&&ge.value.hide()},Kn=function(){var e=(0,i.A)((0,o.A)().mark((function e(t){return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:oe.id=t.id,oe.content=t.content||"",ue.value=!0;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),On=function(){var e=(0,i.A)((0,o.A)().mark((function e(t){return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:f.s.confirm(ee("page.qa.main.deleteHintDetail"),ee("page.qa.main.deleteHint"),{confirmButtonText:ee("page.qa.main.confirmButton"),cancelButtonText:ee("page.qa.main.cancelButton"),type:ee("page.qa.main.deleteType")}).then((0,i.A)((0,o.A)().mark((function e(){return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,_.Tf)(t);case 2:return e.next=4,Ra();case 4:case"end":return e.stop()}}),e)})))).catch((function(){}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xn=function(){oe.id=0,oe.content="",oe.scope=3,ue.value=!0},Bn="",Pn=0,Mn=function(e){var t=e.event.target,n=t.responseText,a=n.trimEnd().split("\n"),r={},u=Bn,o=!1;try{var i=a.length;if(i>0){for(var l=0;l<i;l++){var c=a[l];if(r=JSON.parse(c),r.stopId)V=r.stopId;else{if("freetalkId"in r){r.freetalkId,o=!1;break}r.answer&&(u+=r.answer),"sensitive"===r.finish_reason&&(u+=ee("page.qa.message.error"))}}u&&T(_e.value,Pn,{text:u,owner:"llm",error:!1,loading:o})}}catch(s){console.log(s)}},zn=function(e){var t=e.event.target,n=t.responseText,a=n.trimEnd().split("\n"),r={},u="",o=!1;try{var i=a.length;if(i>0){u="";for(var l=0;l<i;l++){var c=a[l];if(r=JSON.parse(c),r.stopId)V=r.stopId;else{if("freetalkId"in r){r.freetalkId,o=!1;break}r.answer&&(u+=r.answer),"sensitive"===r.finish_reason&&(u+=ee("page.qa.message.error"))}}u&&(T(_e.value,Ce.value.length-1,{createdAt:(0,Ve.pr)(new Date),text:u,owner:"llm",error:!1,loading:o}),Bn=u),N()}}catch(s){console.log(s)}},Hn=function(){var e=(0,i.A)((0,o.A)().mark((function e(t){var n;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Ce.value.findIndex((function(e){return e.id===t})),-1!==n&&T(_e.value,n,{like:!0,unlike:!1});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Vn=function(){var e=(0,i.A)((0,o.A)().mark((function e(t){var n;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Ce.value.findIndex((function(e){return e.id===t})),-1!==n&&T(_e.value,n,{like:!1,unlike:!0});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qn=function(){var e=(0,i.A)((0,o.A)().mark((function e(t,n){var a;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=Ce.value.findIndex((function(e){return e.id===t})),-1!==a&&T(_e.value,a,{feedback:n});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),jn=function(e,t,n,a){var r=JSON.parse(t.pop()),u=r.id,o=r.topk,i=r.freetalkId,l=r.chatStatus,c=r.continueNumber;if(e===_e.value){$.commit("saveHistory",{uuid:_e.value});var s=i;ve.value=i,T(_e.value,a,{id:u,prompt:n,conversationId:s,topk:o,status:l,continueNumber:c,loading:!1})}},Gn=function(){var e=(0,i.A)((0,o.A)().mark((function e(t,n,a,r){var i,l,c,s,d,p,v,m,f;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return l=_e.value,c="compare"===(null===(i=Ee.value)||void 0===i?void 0:i.conversationType)?_.bL:_.C$,Bn=t.text,Pn=a,e.next=6,c((0,u.A)((0,u.A)({},Q),{},{docId:Ee.value.docId,documentCompareId:Ee.value.uuid,query:n},r),H.signal,Mn);case 6:if(s=e.sent,!s||"string"!==typeof s){e.next=15;break}if(v=s.trimEnd().split("\n"),jn(l,v,t.prompt,Pn),!_e.value||_e.value!==(null===(d=Ee.value)||void 0===d?void 0:d.uuid)){e.next=14;break}return f="compare"===(null===(m=Ee.value)||void 0===m?void 0:m.conversationType)?_.LE:_.lU,e.next=14,f({id:_e.value,docId:_e.value,name:Ee.value.name});case 14:null===(p=Ae.value)||void 0===p||p.focus();case 15:xe.value="prompt";case 16:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),Yn=function(){var e=(0,i.A)((0,o.A)().mark((function e(t,n,a,r){var i,l,c,s,d,p,v,m;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return l=_e.value,c="compare"===(null===(i=Ee.value)||void 0===i?void 0:i.conversationType)?_.bL:_.C$,e.next=4,c((0,u.A)((0,u.A)({},Q),{},{docId:Ee.value.docId,documentCompareId:Ee.value.uuid,query:n},r),H.signal,zn);case 4:if(s=e.sent,!s||"string"!==typeof s){e.next=15;break}if(p=s.trimEnd().split("\n"),jn(l,p,n,Ce.value.length-1),!_e.value||_e.value!==(null===(d=Ee.value)||void 0===d?void 0:d.uuid)){e.next=12;break}return m="compare"===(null===(v=Ee.value)||void 0===v?void 0:v.conversationType)?_.LE:_.lU,e.next=12,m({id:_e.value,docId:_e.value,name:Ee.value.name});case 12:return N(),setTimeout((function(){var e;U(),null===(e=Ae.value)||void 0===e||e.focus()}),400),e.abrupt("return");case 15:xe.value="prompt",T(_e.value,a,{loading:!1});case 17:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),Jn=function(){var e=(0,i.A)((0,o.A)().mark((function e(){var t,n,a,r,u,i,l,c,s=arguments;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]&&s[0],n=s.length>1&&void 0!==s[1]?s[1]:null,a=ye.value,t&&(a=null!==(r=null===n||void 0===n?void 0:n.prompt)&&void 0!==r?r:"",a=a||(null===n||void 0===n||null===(u=n.options)||void 0===u?void 0:u.prompt)),[],a&&0!==a.length){e.next=7;break}return e.abrupt("return");case 7:if("prompting"!==xe.value){e.next=9;break}return e.abrupt("return");case 9:return i={},i.preFreetalkId=0!==ve.value?ve.value:null,i.onContinue=!1,C(_e.value,{id:0,createdAt:(0,Ve.pr)(new Date),text:a,owner:"me",error:!1,conversation:null,conversationId:0,preConversationId:ve.value,options:{prompt:a,options:null}}),U(),xe.value="prompting",ye.value="",{},C(_e.value,{id:0,createdAt:(0,Ve.pr)(new Date),text:ee("page.qa.main.llm.hint"),loading:!0,owner:"llm",error:!1,conversation:null,conversationId:0,preConversationId:ve.value,options:{prompt:a,options:i}}),ve.value=0,U(),H=new AbortController,e.prev=21,Bn="",0,e.next=26,Yn(Bn,a,Ce.value.length-1,i);case 26:e.next=41;break;case 28:if(e.prev=28,e.t0=e["catch"](21),l=null===e.t0||void 0===e.t0?void 0:e.t0.message,"canceled"!==l){e.next=35;break}return T(_e.value,Ce.value.length-1,{loading:!1}),N(),e.abrupt("return");case 35:if(c=I(_e.value,Ce.value.length-1),!(null!==c&&void 0!==c&&c.text&&c.text.length>0)){e.next=39;break}return T(_e.value,Ce.value.length-1,{text:c.text+"\n\n"+l,error:!0,loading:!1}),e.abrupt("return");case 39:L(_e.value,Ce.value.length-1,{createdAt:(0,Ve.pr)(new Date),text:l,owner:"llm",error:!0,loading:!1,conversation:null,options:{prompt:a,options:i}}),N();case 41:return e.prev=41,xe.value="prompt",e.finish(41);case 44:case"end":return e.stop()}}),e,null,[[21,28,41,44]])})));return function(){return e.apply(this,arguments)}}(),$n=function(){var e=(0,i.A)((0,o.A)().mark((function e(t){var n,a,r,i,l,c,s;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("prompting"!==xe.value){e.next=2;break}return e.abrupt("return");case 2:if(a=Ce.value[t],r=null!==(n=null===a||void 0===a?void 0:a.prompt)&&void 0!==n?n:"",i=!0,!i){e.next=8;break}return Jn(!0,a),e.abrupt("return");case 8:return l={},a.options&&(l=(0,u.A)({},a.options)),xe.value="prompting",L(_e.value,t,{createdAt:(0,Ve.pr)(new Date),text:"",owner:"llm",error:!1,loading:!0,conversation:null,options:{prompt:r,options:l}}),e.prev=12,Bn="",e.next=16,Yn(Bn,r,t,l);case 16:e.next=25;break;case 18:if(e.prev=18,e.t0=e["catch"](12),"canceled"!==e.t0.message){e.next=23;break}return T(_e.value,t,{loading:!1}),e.abrupt("return");case 23:s=null!==(c=null===e.t0||void 0===e.t0?void 0:e.t0.message)&&void 0!==c?c:ee("page.qa.error"),L(_e.value,t,{createdAt:(0,Ve.pr)(new Date),text:s,owner:"llm",error:!0,loading:!1,conversation:null,options:{prompt:r,options:l}});case 25:return e.prev=25,xe.value="prompt",e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[12,18,25,28]])})));return function(t){return e.apply(this,arguments)}}(),Zn=function(){var e=(0,i.A)((0,o.A)().mark((function e(t){var n,a,r,u,i;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("prompting"!==xe.value){e.next=2;break}return e.abrupt("return");case 2:if(r=Ce.value[t],u=null!==(n=null===r||void 0===r?void 0:r.prompt)&&void 0!==n?n:"",u=u||(null===r||void 0===r||null===(a=r.options)||void 0===a?void 0:a.prompt),u&&0!==u.length){e.next=7;break}return e.abrupt("return");case 7:return i=[],i.preFreetalkId=r.preConversationId,xe.value="prompting",ye.value="",L(_e.value,t,{text:r.text,error:!1,loading:!0,options:{prompt:u,options:r.options}}),H=new AbortController,i.onContinue=!0,i.id=r.id,e.prev=15,e.next=18,Gn(r,u,t,i);case 18:e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](15),L(_e.value,t,{loading:!1});case 23:return e.prev=23,xe.value="prompt",e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[15,20,23,26]])})));return function(t){return e.apply(this,arguments)}}(),ea=function(){b.value||(ra(),Jn())},ta=function(){(0,Y.OV)()},na=function(){(0,Y.Zr)()},aa=function(e){$.commit("pk_document/deleteChat",e)},ra=function(){setTimeout((function(){return oa()}))},ua=function(e){if(e.shiftKey&&"Enter"===e.key){e.preventDefault();var t=e.target,n=t.selectionStart,a=t.selectionEnd;ye.value=ye.value.substring(0,n)+"\n"+ye.value.substring(a),setTimeout((function(){t.selectionStart=t.selectionEnd=n+1,oa()}))}},oa=function(){(0,Y.cY)(0,40),(0,Y.bj)(0,40)},ia=function(){ea()},la=function(){var e=(0,i.A)((0,o.A)().mark((function e(t){var n,a,r;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.uuid,"prompting"!==xe.value){e.next=7;break}return xe.value="prompt",r="compare"===(null===(a=Ee.value)||void 0===a?void 0:a.conversationType)?_.$M:_.iO,e.next=6,r({sessionId:n,stopId:V});case 6:setTimeout(Ea,100);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ca=function(){var e=(0,i.A)((0,o.A)().mark((function e(){var t,n,a;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("prompting"!==xe.value){e.next=7;break}return xe.value="prompt",a="compare"===(null===(t=Ee.value)||void 0===t?void 0:t.conversationType)?_.$M:_.iO,e.next=5,a({sessionId:_e.value,stopId:V});case 5:setTimeout(Ea,100),null===(n=Ae.value)||void 0===n||n.focus();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),sa=function(){var e=(0,i.A)((0,o.A)().mark((function e(){var t,n;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=null===(t=Le.value)||void 0===t?void 0:t.map((function(e){return e.uuid})),!n||0!==n.length){e.next=4;break}return h.nk.error(ee("page.qa.main.operation.notEmpty")),e.abrupt("return");case 4:f.s.confirm(ee("page.qa.main.operation.clearHintDetail"),ee("page.qa.main.operation.clearHint"),{confirmButtonText:ee("page.qa.main.confirmButton"),cancelButtonText:ee("page.qa.main.cancelButton"),type:"warning"}).then((0,i.A)((0,o.A)().mark((function e(){var t,n,a,r;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,la({uuid:_e.value});case 2:return a=(null===(t=Le.value)||void 0===t?void 0:t.filter((function(e){return"compare"!==e.conversationType})).map((function(e){return e.uuid})))||"0",r=(null===(n=Le.value)||void 0===n?void 0:n.filter((function(e){return"compare"===e.conversationType})).map((function(e){return e.uuid})))||[],e.next=6,(0,_.Nn)({docIds:a.join(",")});case 6:if(e.t0=r.length,!e.t0){e.next=10;break}return e.next=10,(0,_.dy)({ids:r.join(",")});case 10:$.commit("pk_document/clearAll"),h.nk.success(ee("page.qa.main.operation.successMessageLogs")),(0,Y.cY)(0,40);case 13:case"end":return e.stop()}}),e)})))).catch((function(){}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),da=function(){var e=(0,i.A)((0,o.A)().mark((function e(){return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==_e.value){e.next=3;break}return h.nk.error(ee("page.qa.main.operation.notEmpty")),e.abrupt("return");case 3:if(!b.value){e.next=5;break}return e.abrupt("return");case 5:f.s.confirm(ee("page.qa.main.operation.deleteLogs"),ee("page.qa.main.operation.hint"),{confirmButtonText:ee("page.qa.main.confirmButton"),cancelButtonText:ee("page.qa.main.cancelButton"),type:ee("page.qa.main.deleteType")}).then((0,i.A)((0,o.A)().mark((function e(){var t,n;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="compare"===(null===(t=Ee.value)||void 0===t?void 0:t.conversationType)?_.Kq:_.b5,e.next=3,n({docId:Ee.value.docId,documentCompareId:Ee.value.uuid});case 3:$.commit("pk_document/clearChatByUuid",{uuid:_e.value}),h.nk.success(ee("page.qa.main.deleteSuccess"));case 5:case"end":return e.stop()}}),e)})))).catch((function(){}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pa=function(e){if(!b.value&&(pe.value=e,"number"===typeof e)){document.documentElement.style.getPropertyValue("--text-preview");document.documentElement.style.setProperty("--text-preview",e+"px"),h.nk.success(ee("page.qa.main.operation.successMessageFont"))}},va=function(){var e=(0,i.A)((0,o.A)().mark((function e(){return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!b.value){e.next=2;break}return e.abrupt("return");case 2:if(!be.value){e.next=4;break}return e.abrupt("return");case 4:f.s.confirm(ee("page.qa.main.operation.deleteLogs"),ee("page.qa.main.operation.hint"),{confirmButtonText:ee("page.qa.main.confirmButton"),cancelButtonText:ee("page.qa.main.cancelButton"),type:ee("page.qa.main.deleteType")}).then((0,i.A)((0,o.A)().mark((function e(){var t,n,a,r;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,be.value=!0,t=document.getElementById("chatMessage"),e.next=5,w()(t,{useCORS:!0,scrollX:0,scrollY:0,width:716,height:1e3});case 5:n=e.sent,a=n.toDataURL("image/png"),r=document.createElement("a"),r.style.display="none",r.href=a,r.setAttribute("download","chat.png"),"undefined"===typeof r.download&&r.setAttribute("target","_blank"),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(r.href),be.value=!1,h.nk.success(ee("page.qa.main.exportSuccess")),e.next=24;break;case 20:e.prev=20,e.t0=e["catch"](0),be.value=!1,h.nk.error(ee("page.qa.main.exportError"));case 24:case"end":return e.stop()}}),e,null,[[0,20]])})))).catch((function(){}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ma=function(){b.value},fa=function(){ve.value=-1,U()},ha=function(){var e=(0,i.A)((0,o.A)().mark((function e(t){return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{Me.value=t.doc_id,je.value=t.text.replace(/<!--\{.*\}-->/g,""),_n.value=!0,_n.value=!0}catch(n){console.log(n)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ka=function(){var e=(0,i.A)((0,o.A)().mark((function e(t){var n,a;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=null===(n=Ee.value)||void 0===n||null===(n=n.docs)||void 0===n?void 0:n.find((function(e){return e.docId===t.docId})),a&&$.commit("pk_document/changeUrlState",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ga=function(){var e=(0,i.A)((0,o.A)().mark((function e(){var n,a;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.id="",t.abstract="",t.summary="",t.question="",n=We.value,e.next=7,(0,_.lQ)({docId:n});case 7:if(a=e.sent,We.value===n){e.next=10;break}return e.abrupt("return",!1);case 10:if(!a||!a.data){e.next=18;break}return t.id=a.data.id,t.abstract=a.data.digest,t.summary=a.data.summarize,t.question=a.data.question,t.score=a.data.score,t.comment=a.data.comment,e.abrupt("return",!1);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ba=function(){var e=(0,i.A)((0,o.A)().mark((function e(t){var n;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,Qe.Ju)({scope:2,language:t});case 2:n=e.sent,n&&n.data&&n.data.length>0?(Se.value=n.data[0],Se.value.hint=Se.value.hint||ee("page.document.empty.hint")):Se.value={title:ee("page.document.empty.title"),subtitle:ee("page.document.empty.desc"),hint:ee("page.document.empty.hint")};case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),wa=function(){var e=(0,i.A)((0,o.A)().mark((function e(t){var n,a;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=null,"compare"!==(null===(n=Ee.value)||void 0===n?void 0:n.conversationType)){e.next=7;break}return e.next=4,(0,Qe.Ju)({scope:5,language:t});case 4:a=e.sent,e.next=10;break;case 7:return e.next=9,(0,Qe.Ju)({scope:3,language:t});case 9:a=e.sent;case 10:a&&a.data&&a.data.length>0?Fe.value=a.data[0]:Fe.value={title:ee("page.document.start.title"),subtitle:ee("page.document.start.desc")};case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ya=function(){var e=(0,i.A)((0,o.A)().mark((function e(){var t,n;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=[],e.next=3,(0,_.M2)();case 3:return n=e.sent,n&&n.data&&n.data.length>0&&n.data.forEach((function(e){e.docs&&e.docs.length>0&&t.push({uuid:e.id,conversationType:"compare",name:e.name,docs:e.docs,docIds:e.docIds,parserState:e.docs[0].parserState,sourceUrl:e.docs[0].sourceFile,isEdit:!1,createdAt:e.updateTime||e.createTime,chats:[]})})),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Aa=function(){var e=(0,i.A)((0,o.A)().mark((function e(){var t;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,_.ME)();case 2:if(t=e.sent,!(t&&t.data&&t.data.length)){e.next=5;break}return e.abrupt("return",t.data.map((function(e){return{uuid:e.docId,docId:e.docId,name:e.docName,conversationType:"doc",state:e.state,parserState:e.parserState,sourceUrl:e.sourceFile,pdfUrl:e.pdfFile,chunkFile:e.chunkFile,isEdit:!1,createdAt:e.updateTime||e.createTime,chats:[]}})));case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xa=function(){var e=(0,i.A)((0,o.A)().mark((function e(){var t,n,a;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ya();case 2:return t=e.sent,e.next=5,Aa();case 5:n=e.sent,a=[].concat((0,r.A)(t),(0,r.A)(n)).sort((function(e,t){return t.createdAt>e.createdAt?1:-1})),$.commit("pk_document/loadHistory",a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ra=function(){var e=(0,i.A)((0,o.A)().mark((function e(){var t;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,_.WK)({scope:Rn});case 2:t=e.sent,t&&t.data&&t.data.length>=0&&(re.value=t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_a=function(){var e=(0,i.A)((0,o.A)().mark((function e(a){var r,u;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return se.value=!1,t.loading=!0,ke.value=!0,le.value=!0,Ke.value="",e.next=7,ca();case 7:return $.commit("pk_document/saveActive",a),R(),e.next=11,ga();case 11:return u=e.sent,n({loading:u}),le.value=!1,se.value=!1,(0,Y.cY)(0,40),Ia(),Ta(),e.next=20,Ea("add");case 20:null===(r=Ae.value)||void 0===r||r.focus();case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ea=function(){var e=(0,i.A)((0,o.A)().mark((function e(){var t,n,r,u,i,l,c,s,d,p,v,m=arguments;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(u=m.length>0&&void 0!==m[0]?m[0]:"add",!de.value){e.next=3;break}return e.abrupt("return");case 3:return de.value=!0,i="update"===u&&Ce.value.length>0?Ce.value[0].createdAt:"",l="compare"===(null===(t=Ee.value)||void 0===t?void 0:t.conversationType)?_.h6:_.O7,e.next=8,l({documentCompareId:null===(n=Ee.value)||void 0===n?void 0:n.uuid,docId:null===(r=Ee.value)||void 0===r?void 0:r.docId,page:5,createTime:i});case 8:if(c=e.sent,c&&c.data){s=[],d=(0,a.A)(c.data);try{for(d.s();!(p=d.n()).done;)v=p.value,s.push({createdAt:v.createTime,id:0,text:v.query,owner:"me",error:!1,loading:!1,like:1===v.score,unlike:2===v.score,prompt:"",conversationId:v.freetalkId,preConversationId:v.preFreetalkId}),s.push({createdAt:v.createTime,id:v.id,text:v.answer,owner:"llm",error:!1,loading:!1,like:1===v.score,unlike:2===v.score,feedback:v.comment,prompt:v.query,conversationId:v.freetalkId,preConversationId:v.preFreetalkId,topk:v.topk,status:v.chatStatus,continueNumber:v.continueNumber})}catch(o){d.e(o)}finally{d.f()}"update"===u?$.commit("pk_document/updateChatsByUuid",{uuid:_e.value,data:s}):($.commit("pk_document/addChatsByUuid",{uuid:_e.value,data:s}),ve.value=c.data.length>0?c.data[c.data.length-1].freetalkId:0)}c.data&&c.data.length<5&&(se.value=!0),U(),de.value=!1;case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ca=function(){var e=(0,i.A)((0,o.A)().mark((function e(t){var n;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.target.scrollTop||t.target.scrollingElement.scrollTop||t.target.documentElement.scrollTop,t.target.scrollHeight,t.target.clientHeight,!(n<=40)||se.value){e.next=7;break}return e.next=6,Ea("update");case 6:window.document.removeEventListener("scroll",Ca);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),La=function(){var e=(0,i.A)((0,o.A)().mark((function e(t){var n,a,r;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.target.scrollTop,t.target.scrollHeight,t.target.clientHeight,a=window.document.querySelector(".main-chat-abstract"),null===a||void 0===a||a.scrollHeight,r=(null===a||void 0===a?void 0:a.scrollHeight)+20,n>Math.abs(r)&&(ke.value=!1),!(n<20&&n<20)||se.value){e.next=9;break}return e.next=9,Ea("update");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ta=function(){window.document.addEventListener("scroll",Ca),setTimeout((function(){var e;return null===(e=F.value)||void 0===e?void 0:e.wrapRef.addEventListener("scroll",La)}),1e3)},Ia=function(){var e;window.document.addEventListener("scroll",Ca),null===(e=F.value)||void 0===e||e.wrapRef.addEventListener("scroll",La)},Sa=(0,He.W4)(ba),Fa=Sa.defaultLang,Ua=(0,He.W4)(wa),Na=Ua.defaultLang;(0,l.sV)((0,i.A)((0,o.A)().mark((function e(){var t,n,a,r;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,xa();case 2:return e.next=4,Ra();case 4:if(le.value=!1,!_e.value){e.next=10;break}return e.next=8,ga();case 8:return e.next=10,Ea();case 10:return e.next=12,ba(Fa.value);case 12:return e.next=14,wa(Na.value);case 14:Ta(),(0,Y.cY)(0,40),(0,Y.bj)(0,40),null===(t=Ae.value)||void 0===t||t.focus(),n=document.createElement("script"),n.src="/preview/editormd/lib/marked.min.js",document.body.appendChild(n),a=document.createElement("script"),a.src="/preview/editormd/lib/prettify.min.js",document.body.appendChild(a),r=document.createElement("script"),r.src="/preview/editormd/lib/flowchart.min.js",document.body.appendChild(r);case 27:case"end":return e.stop()}}),e)})))),(0,l.hi)((function(){(0,Y.fO)(),Ia(),"prompting"===xe.value&&H.abort()}));return(0,l.wB)((function(){return qe.value}),function(){var e=(0,i.A)((0,o.A)().mark((function e(t,n){return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t&&t!==n&&ga();case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),(0,l.wB)((function(){return _e.value}),(0,i.A)((0,o.A)().mark((function e(){var t;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:"compare"!==(null===(t=Ee.value)||void 0===t?void 0:t.conversationType)&&_e.value&&De.value&&q();case 1:case"end":return e.stop()}}),e)})))),(0,l.wB)((function(){var e;return null===(e=Ee.value)||void 0===e?void 0:e.conversationType}),(0,i.A)((0,o.A)().mark((function e(){return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.t0=Ee.value,!e.t0){e.next=4;break}return e.next=4,wa(Na.value);case 4:case"end":return e.stop()}}),e)})))),function(e,n){var a,r,u,o,i,p,v,m,f,h,w=(0,l.g2)("el-input"),x=(0,l.g2)("el-upload"),R=(0,l.g2)("el-skeleton-item"),_=(0,l.g2)("el-skeleton"),E=(0,l.g2)("el-divider"),C=(0,l.g2)("el-scrollbar"),L=(0,l.g2)("ElScrollbar"),T=(0,l.g2)("el-dropdown-item"),I=(0,l.g2)("el-dropdown-menu"),S=(0,l.g2)("el-dropdown"),U=(0,l.g2)("el-button"),N=(0,l.g2)("el-form-item"),D=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.CE)("div",Ge,[(0,l.Lk)("div",Ye,[(0,l.Lk)("div",Je,[(0,l.Lk)("div",$e,[(0,l.Lk)("h1",Ze,(0,c.v_)((0,s.R1)(ee)("page.document.header.title")),1),(0,l.bF)(w,{modelValue:ne.value,"onUpdate:modelValue":n[0]||(n[0]=function(e){return ne.value=e}),class:"qa-header-input",placeholder:(0,s.R1)(ee)("page.document.header.input"),onKeyup:(0,d.jR)(Fn,["enter"]),"suffix-icon":(0,s.R1)(y.vji)},null,8,["modelValue","placeholder","suffix-icon"])])]),(0,l.Lk)("div",et,[(0,l.Lk)("div",tt,[(0,l.bF)(x,{ref_key:"uploadRef",ref:P,accept:".pdf,.xlsx,.docx,.md,.txt","show-file-list":!1,drag:"",limit:1,"before-upload":(0,s.R1)(K),"http-request":Sn,"on-exceed":(0,s.R1)(O),class:"upload-loading"},{default:(0,l.k6)((function(){return[(0,l.Lk)("div",nt,[(0,l.Lk)("div",at,[(0,l.Lk)("span",rt,[(0,l.bF)((0,s.R1)(A.A),{type:"pk-plus"})]),(0,l.Lk)("span",ut,(0,c.v_)((0,s.R1)(ee)("page.document.main.create")),1)]),(0,l.Lk)("div",ot,(0,c.v_)((0,s.R1)(ee)("page.document.main.createDesc",{maxToken:te.value})),1)])]})),_:1},8,["accept","before-upload","on-exceed"]),(0,l.Lk)("div",it,[(0,l.Lk)("div",lt,[ct,(0,l.Lk)("span",st,(0,c.v_)((0,s.R1)(ee)("page.document.main.knowledge")),1)])])]),ie.value?((0,l.uX)(),(0,l.CE)("div",dt,[(0,l.Lk)("div",{class:"qa-main-create-one flex",onClick:Nn},[(0,l.Lk)("div",pt,[(0,l.Lk)("span",vt,[(0,l.bF)((0,s.R1)(A.A),{type:"pk-compare"})]),(0,l.Lk)("span",mt,(0,c.v_)((0,s.R1)(ee)("page.document.main.compare")),1)]),(0,l.Lk)("div",ft,(0,c.v_)((0,s.R1)(ee)("page.document.main.compareDesc")),1)])])):(0,l.Q3)("",!0),(0,l.Lk)("div",ht,[(0,l.bF)(me,{filter:ne.value,onLoadData:_a,onStopLLM:la},null,8,["filter"])]),(0,l.Lk)("div",{class:"qa-main-clear",onClick:sa},[(0,l.bF)((0,s.R1)(A.A),{type:"pk-delete"})])])]),Ne.value?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",kt,[(0,l.Lk)("div",gt,[bt,(0,l.Lk)("div",wt,[(0,l.Lk)("div",yt,(0,c.v_)(Se.value.title),1),(0,l.Lk)("div",At,(0,c.v_)(Se.value.subtitle),1),(0,l.Lk)("div",xt,(0,c.v_)(Se.value.hint),1),(0,l.Lk)("div",Rt,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(ae.value,(function(e){return(0,l.uX)(),(0,l.CE)("div",{class:"main-chat-empty-document",key:e.icon},[(0,l.bF)(x,{ref_for:!0,ref_key:"uploadReffer",ref:z,accept:".pdf,.xlsx,.docx,.md","show-file-list":!1,drag:"",limit:1,"before-upload":(0,s.R1)(K),"http-request":Sn,"on-exceed":(0,s.R1)(O),class:"upload-loading"},{default:(0,l.k6)((function(){return[(0,l.Lk)("div",_t,[(0,l.Lk)("img",{src:e.icon},null,8,Et)]),(0,l.Lk)("div",Ct,[(0,l.Lk)("p",Lt,(0,c.v_)((0,s.R1)(ee)(e.text)),1),(0,l.Lk)("p",Tt,(0,c.v_)((0,s.R1)(ee)(e.description,{maxToken:te.value})),1)])]})),_:2},1032,["accept","before-upload","on-exceed"])])})),128))])])])])),Ne.value&&De.value?((0,l.uX)(),(0,l.CE)("div",It,[(null===(a=Ee.value)||void 0===a?void 0:a.parserState)<=(0,s.R1)(B).RUNNING?((0,l.uX)(),(0,l.CE)("div",St,[(0,l.bF)((0,s.R1)(A.A),{type:"pk-loading"})])):(0,l.Q3)("",!0),(null===(r=Ee.value)||void 0===r?void 0:r.parserState)<=(0,s.R1)(B).RUNNING?((0,l.uX)(),(0,l.CE)("div",Ft,(0,c.v_)((0,s.R1)(ee)("page.document.preview.parserLoading")),1)):(0,l.Q3)("",!0),(null===(u=Ee.value)||void 0===u?void 0:u.parserState)<=(0,s.R1)(B).RUNNING?((0,l.uX)(),(0,l.CE)("div",Ut,(0,c.v_)((0,s.R1)(ee)("page.document.preview.parserDesc")),1)):(0,l.Q3)("",!0),(null===(o=Ee.value)||void 0===o?void 0:o.parserState)===(0,s.R1)(B).TOKEN_EXCEED?((0,l.uX)(),(0,l.CE)("div",Nt,(0,c.v_)((0,s.R1)(ee)("page.document.preview.error-parser")),1)):(0,l.Q3)("",!0),(null===(i=Ee.value)||void 0===i?void 0:i.parserState)===(0,s.R1)(B).TOKEN_EXCEED?((0,l.uX)(),(0,l.CE)("div",Dt,(0,c.v_)((0,s.R1)(ee)("page.document.preview.error-exceed",{maxToken:te.value})),1)):(0,l.Q3)("",!0),(null===(p=Ee.value)||void 0===p?void 0:p.parserState)===(0,s.R1)(B).TOKEN_LIMIT?((0,l.uX)(),(0,l.CE)("div",qt,(0,c.v_)((0,s.R1)(ee)("page.document.preview.error-parser")),1)):(0,l.Q3)("",!0),(null===(v=Ee.value)||void 0===v?void 0:v.parserState)===(0,s.R1)(B).TOKEN_LIMIT?((0,l.uX)(),(0,l.CE)("div",Wt,(0,c.v_)((0,s.R1)(ee)("page.document.preview.error-zero")),1)):(0,l.Q3)("",!0),(null===(m=Ee.value)||void 0===m?void 0:m.parserState)===(0,s.R1)(B).ERROR?((0,l.uX)(),(0,l.CE)("div",Kt,(0,c.v_)((0,s.R1)(ee)("page.document.preview.error-parser")),1)):(0,l.Q3)("",!0),(null===(f=Ee.value)||void 0===f?void 0:f.parserState)===(0,s.R1)(B).ERROR?((0,l.uX)(),(0,l.CE)("div",Ot,(0,c.v_)((0,s.R1)(ee)("page.document.preview.error-parser")),1)):(0,l.Q3)("",!0)])):(0,l.Q3)("",!0),Ne.value&&!De.value?((0,l.uX)(),(0,l.CE)("div",Xt,[(0,l.bF)(Xe.A,{uuid:_e.value,history:Ee.value,sourceUrl:qe.value,urlStateDocId:We.value,onHandleCompareDocsChange:ka},null,8,["uuid","history","sourceUrl","urlStateDocId"])])):(0,l.Q3)("",!0),(0,l.bo)((0,l.Lk)("div",Bt,[le.value?((0,l.uX)(),(0,l.Wv)(_,{key:0,class:"main-chat-content",animated:""},{template:(0,l.k6)((function(){return[(0,l.Lk)("div",Pt,[(0,l.Lk)("div",Mt,[(0,l.Lk)("div",zt,[(0,l.bF)(R,{variant:"image",style:{width:"72px",height:"72px"}})]),(0,l.Lk)("div",Ht,[(0,l.bF)(R,{variant:"text"}),(0,l.bF)(R,{variant:"text"}),(0,l.bF)(R,{variant:"text"}),(0,l.bF)(R,{variant:"text"})])])])]})),_:1})):(0,l.Q3)("",!0),(0,l.bo)((0,l.Lk)("div",Vt,[(0,l.Lk)("div",Qt,[(0,l.Lk)("div",jt,[ke.value?((0,l.uX)(),(0,l.CE)("div",Gt)):((0,l.uX)(),(0,l.CE)("div",Yt,[(0,l.Lk)("div",{class:"iconabtext",style:{background:"url(/images/hide.svg) no-repeat top center"},onClick:In},[(0,l.eW)((0,c.v_)((0,s.R1)(ee)("page.document.abstract.hide")),1),(0,l.bF)((0,s.R1)(A.A),{type:"pk-inpand"})])])),(0,l.bF)(C,{ref_key:"scrollbarRef",ref:F},{default:(0,l.k6)((function(){return[_e.value?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},["compare"!==Ee.value.conversationType?((0,l.uX)(),(0,l.Wv)(M,{key:0,id:he.value,history:Ee.value,historyAbstract:t,abExpand:ke.value,onRefreshAbstract:Ln,onRegenerateAb:Tn,onShowAbExpand:In},null,8,["id","history","historyAbstract","abExpand"])):(0,l.Q3)("",!0),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(Ce.value,(function(e,t){return(0,l.uX)(),(0,l.Wv)(Te,{key:t,text:e.text,"created-at":e.createdAt,conversationType:Ee.value.conversationType,id:e.id,topk:e.topk,like:e.like,unlike:e.unlike,feedback:e.feedback,owner:e.owner,error:e.error,status:e.status,"continue-number":e.continueNumber,loading:e.loading,"pre-conversation-id":0===t?void 0:e.preConversationId,onHandleClick:ha,onRegenerate:function(e){return $n(t)},onDelete:function(e){return aa(t)},onLike:Hn,onUnlike:Vn,onFeedback:Qn,onContinue:function(e){return Zn(t)}},null,8,["text","created-at","conversationType","id","topk","like","unlike","feedback","owner","error","status","continue-number","loading","pre-conversation-id","onRegenerate","onDelete","onContinue"])})),128)),Ce.value.length>0&&-1===ve.value?((0,l.uX)(),(0,l.CE)("div",Jt,[(0,l.bF)(E,{"content-position":"center"},{default:(0,l.k6)((function(){return[(0,l.eW)((0,c.v_)((0,s.R1)(ee)("page.qa.main.divider")),1)]})),_:1})])):(0,l.Q3)("",!0),0===Ce.value.length?((0,l.uX)(),(0,l.CE)("div",$t,[Zt,(0,l.Lk)("div",en,[(0,l.Lk)("div",tn,(0,c.v_)(Fe.value.title),1),(0,l.Lk)("div",nn,(0,c.v_)(Fe.value.subtitle),1)])])):(0,l.Q3)("",!0)],64)):(0,l.Q3)("",!0)]})),_:1},512)])]),(0,l.Lk)("div",an,[En.value&&En.value.length>0?((0,l.uX)(),(0,l.CE)("div",rn,[(0,l.Lk)("div",un,(0,c.v_)((0,s.R1)(ee)("page.document.abstract.question")),1),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(En.value,(function(e){return(0,l.uX)(),(0,l.CE)("div",{class:"question-list",title:e,key:e,onClick:function(t){return Dn(e)}},(0,c.v_)(e),9,on)})),128))])):(0,l.Q3)("",!0),(0,l.Lk)("div",ln,[(0,l.Lk)("div",cn,[(0,l.bF)((0,s.R1)(k.Vc),{placement:"top",width:790,trigger:"hover",ref_key:"popRef",ref:ge,modelValue:fe.value,"onUpdate:modelValue":n[1]||(n[1]=function(e){return fe.value=e})},{reference:(0,l.k6)((function(){return[(0,l.bF)((0,s.R1)(A.A),{type:"pk-normaldata",class:"iconsvg w20 h20"})]})),default:(0,l.k6)((function(){return[(0,l.Lk)("h1",sn,(0,c.v_)((0,s.R1)(ee)("page.qa.main.footer.normalData")),1),(0,l.bF)(L,{class:"normal-data"},{default:(0,l.k6)((function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(re.value,(function(e,t){return(0,l.uX)(),(0,l.CE)("div",{class:"normal-data-item",key:"normal"+t},[(0,l.Lk)("div",{class:"normal-data-item-title",onClick:function(t){return Wn(e)}},[(0,l.bF)(j.A,{content:e.content,placement:"top-start","show-arrow":!1},null,8,["content"])],8,dn),(0,l.Lk)("div",pn,[(0,l.Lk)("div",{class:"normal-data-operation-edit",onClick:function(t){return Kn(e)}},[(0,l.bF)((0,s.R1)(A.A),{type:"pk-editnormal",class:"iconsvg"})],8,vn),(0,l.Lk)("div",{class:"normal-data-operation-delete",onClick:function(t){return On(e)}},[(0,l.bF)((0,s.R1)(A.A),{type:"pk-deletenormal",class:"iconsvg"})],8,mn)])])})),128))]})),_:1}),(0,l.Lk)("div",fn,[(0,l.Lk)("a",{class:"normal-data-item-add",onClick:Xn},[(0,l.bF)((0,s.R1)(A.A),{type:"pk-addplus"}),(0,l.Lk)("span",null,(0,c.v_)((0,s.R1)(ee)("page.qa.main.footer.createNormalData")),1)])])]})),_:1},8,["modelValue"])]),(0,l.Lk)("div",{class:"main-chat-footer-operation",onClick:da},[(0,l.bF)((0,s.R1)(A.A),{type:"pk-deletelogs",class:"iconsvg w20 h20"})]),(0,l.Lk)("div",hn,[(0,l.bF)(S,{class:"footer-font",trigger:"click",placement:"top"},{dropdown:(0,l.k6)((function(){return[(0,l.bF)(I,null,{default:(0,l.k6)((function(){return[(0,l.bF)(T,{class:(0,c.C4)({"is-active":18===pe.value}),onClick:n[2]||(n[2]=function(e){return pa(18)})},{default:(0,l.k6)((function(){return[(0,l.eW)(" Maximum 18 ")]})),_:1},8,["class"]),(0,l.bF)(T,{class:(0,c.C4)({"is-active":16===pe.value}),onClick:n[3]||(n[3]=function(e){return pa(16)})},{default:(0,l.k6)((function(){return[(0,l.eW)(" Large 16 ")]})),_:1},8,["class"]),(0,l.bF)(T,{class:(0,c.C4)({"is-active":14===pe.value}),onClick:n[4]||(n[4]=function(e){return pa(14)})},{default:(0,l.k6)((function(){return[(0,l.eW)(" Defaut 14 ")]})),_:1},8,["class"]),(0,l.bF)(T,{class:(0,c.C4)({"is-active":12===pe.value}),onClick:n[5]||(n[5]=function(e){return pa(12)})},{default:(0,l.k6)((function(){return[(0,l.eW)(" Minimum 12 ")]})),_:1},8,["class"])]})),_:1})]})),default:(0,l.k6)((function(){return[(0,l.Lk)("span",kn,[(0,l.bF)((0,s.R1)(A.A),{type:"pk-fontselect",class:"iconsvg w20 h20"})])]})),_:1})]),(0,l.Lk)("div",{class:"main-chat-footer-operation hide",onClick:va},[(0,l.bF)((0,s.R1)(A.A),{type:"pk-downloadlogs",class:"iconsvg w20 h20"})]),(0,l.Lk)("div",{class:"main-chat-footer-operation hide",onClick:ma},[(0,l.bF)((0,s.R1)(A.A),{type:"pk-sharelogs",class:"iconsvg w20 h20"})]),(0,l.Lk)("div",gn,[(0,l.bF)(U,{class:"flex-text",disabled:-1===ve.value||0===Ce.value.length,onClick:fa},{default:(0,l.k6)((function(){return[(0,l.bF)((0,s.R1)(A.A),{class:"mr6",type:"pk-documentupload"}),(0,l.eW)(" "+(0,c.v_)((0,s.R1)(ee)("page.qa.main.operation.newText")),1)]})),_:1},8,["disabled"])])]),(0,l.Lk)("div",bn,[(0,l.bF)(w,{maxlength:"4000",ref_key:"inputRef",ref:Ae,modelValue:ye.value,"onUpdate:modelValue":n[6]||(n[6]=function(e){return ye.value=e}),type:"textarea","input-style":"height: 3.375rem",disabled:b.value||"prompting"===xe.value,placeholder:(0,s.R1)(ee)("page.qa.main.footer.inputplaceholder"),autosize:{minRows:1,maxRows:10},onInput:oa,onPaste:ra,onKeydown:ua,onKeypress:(0,d.jR)(ia,["enter"]),onFocus:ta,onBlur:na},null,8,["modelValue","disabled","placeholder"]),(0,l.Lk)("div",wn,["prompt"===xe.value?((0,l.uX)(),(0,l.Wv)(U,{key:0,type:"primary",disabled:Re.value,onClick:ea},{icon:(0,l.k6)((function(){return[Re.value?((0,l.uX)(),(0,l.Wv)((0,s.R1)(A.A),{key:0,type:"pk-prompt",class:"main-chat-footer-promptwh"})):((0,l.uX)(),(0,l.Wv)((0,s.R1)(A.A),{key:1,type:"pk-prompting",class:"main-chat-footer-promptwh"}))]})),_:1},8,["disabled"])):"prompting"===xe.value?((0,l.uX)(),(0,l.Wv)(U,{key:1,type:"primary",onClick:ca},{icon:(0,l.k6)((function(){return[(0,l.bF)((0,s.R1)(A.A),{type:"pk-stopre",class:"main-chat-footer-promptwh"})]})),_:1})):(0,l.Q3)("",!0)])])])],512),[[d.aG,!le.value]])],512),[[d.aG,_e.value&&!De.value]]),(0,l.bF)(D,{modelValue:ue.value,"onUpdate:modelValue":n[9]||(n[9]=function(e){return ue.value=e}),title:(oe.id,(0,s.R1)(ee)("page.qa.main.footer.modifyNormalDataHint")),width:"600"},{footer:(0,l.k6)((function(){return[(0,l.Lk)("div",yn,[(0,l.bF)(U,{onClick:n[8]||(n[8]=function(e){return ue.value=!1})},{default:(0,l.k6)((function(){return[(0,l.eW)((0,c.v_)((0,s.R1)(ee)("page.qa.main.cancelButton")),1)]})),_:1}),(0,l.bF)(U,{type:"primary",onClick:qn},{default:(0,l.k6)((function(){return[(0,l.eW)((0,c.v_)((0,s.R1)(ee)("page.qa.main.confirmButton")),1)]})),_:1})])]})),default:(0,l.k6)((function(){return[(0,l.bF)((0,s.R1)(g.US),{model:oe,rules:Cn,ref_key:"normalForm",ref:ce,class:"normalForm","label-width":"10"},{default:(0,l.k6)((function(){return[(0,l.bF)(N,{label:"",prop:"content"},{default:(0,l.k6)((function(){return[(0,l.bF)(w,{class:"normal",maxlength:"500",type:"textarea",modelValue:oe.content,"onUpdate:modelValue":n[7]||(n[7]=function(e){return oe.content=e}),placeholder:(0,s.R1)(ee)("page.qa.normalData.placeholder")},null,8,["modelValue","placeholder"])]})),_:1})]})),_:1},8,["model","rules"])]})),_:1},8,["modelValue","title"]),(0,l.bF)(D,{modelValue:_n.value,"onUpdate:modelValue":n[10]||(n[10]=function(e){return _n.value=e}),title:null===(h=Ee.value)||void 0===h?void 0:h.docName},{default:(0,l.k6)((function(){return[(0,l.bF)(C,{style:{height:"60vh"}},{default:(0,l.k6)((function(){return[(0,l.Lk)("div",An,[(0,l.bF)(Ie.A,{docId:Me.value,text:je.value},null,8,["docId","text"])])]})),_:1})]})),_:1},8,["modelValue","title"]),(0,l.bF)(Oe,{modelValue:we.value,"onUpdate:modelValue":n[11]||(n[11]=function(e){return we.value=e}),onHandleCreateCompare:Un},null,8,["modelValue"])])}}});const En=(0,B.A)(_n,[["__scopeId","data-v-913fcb9a"]]);var Cn=En},84354:function(e,t,n){"use strict";var a=n(34912),r=a.match(/firefox\/(\d+)/i);e.exports=!!r&&+r[1]},29634:function(e,t,n){"use strict";var a=n(34912);e.exports=/MSIE|Trident/.test(a)},75112:function(e,t,n){"use strict";var a=n(34912),r=a.match(/AppleWebKit\/(\d+)\./);e.exports=!!r&&+r[1]},14046:function(e,t,n){"use strict";var a=n(7414),r=n(65456),u=n(76170),o=n(45493),i=n(92630),l=n(20702),c=n(97167),s=n(70591),d=n(71352),p=n(69478),v=n(84354),m=n(29634),f=n(32908),h=n(75112),k=[],g=r(k.sort),b=r(k.push),w=s((function(){k.sort(void 0)})),y=s((function(){k.sort(null)})),A=p("sort"),x=!s((function(){if(f)return f<70;if(!(v&&v>3)){if(m)return!0;if(h)return h<603;var e,t,n,a,r="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(a=0;a<47;a++)k.push({k:t+a,v:n})}for(k.sort((function(e,t){return t.v-e.v})),a=0;a<k.length;a++)t=k[a].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return"DGBEFHACIJK"!==r}})),R=w||!y||!A||!x,_=function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:c(t)>c(n)?1:-1}};a({target:"Array",proto:!0,forced:R},{sort:function(e){void 0!==e&&u(e);var t=o(this);if(x)return void 0===e?g(t):g(t,e);var n,a,r=[],c=i(t);for(a=0;a<c;a++)a in t&&b(r,t[a]);d(r,_(e)),n=i(r),a=0;while(a<n)t[a]=r[a++];while(a<c)l(t,a++);return t}})}}]);