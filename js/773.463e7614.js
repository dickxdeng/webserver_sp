"use strict";(self["webpackChunkCustomsPedia"]=self["webpackChunkCustomsPedia"]||[]).push([[773],{51832:function(e,a,t){t.d(a,{A:function(){return o}});t(14898);var l=t(38118),s=t(28694),n=t(32228);function o(){const{locale:e}=(0,n.s9)(),a={"zh-CN":[{value:"zh-cn",label:"简体中文"},{value:"zh-tw",label:"繁体中文"},{value:"en-us",label:"英文"},{value:"default",label:"其他"}],"zh-TW":[{value:"zh-cn",label:"简体中文"},{value:"zh-tw",label:"繁体中文"},{value:"en-us",label:"English"},{value:"default",label:"其他"}],"en-US":[{value:"zh-cn",label:"Chinese (Simplified)"},{value:"zh-tw",label:"Chinese (Traditional)"},{value:"en-us",label:"English"},{value:"default",label:"Others"}],"th-TH":[{value:"zh-cn",label:"简体中文"},{value:"zh-tw",label:"繁体中文"},{value:"en-us",label:"English"},{value:"default",label:"其他"}]},t="zh-CN",o={"zh-CN":{"zh-cn":"简体中文","zh-hk":"繁体中文","en-us":"English",default:"其他"},"zh-TW":{"zh-cn":"簡體中文","zh-hk":"繁體中文","en-us":"English",default:"其他"},"en-US":{"zh-cn":"Chinese (Simplified)","zh-hk":"Chinese (Traditional)","en-us":"English",default:"Others"}},u={"zh-CN":{0:"文本",1:"文本",2:"QA"},"zh-TW":{0:"文本",1:"文本",2:"QA"},"en-US":{0:"Text",1:"Text",2:"Q&A"}},i={DOCUMENT_WAIT_CONFIRM:1,DOCUMENT_WAIT_PUBLISH:2,DOCUMENT_PUBLISHED:3,DOCUMENT_STOP:4,DOCUMENT_DUPL:5,DOCUMENT_PUBLISH_FAILED:6,DOCUMENT_PUBLISH_ING:7,DOCUMENT_SPLITTING:8,DOCUMENT_SPLIT_SUCCESS:9,DOCUMENT_SPLIT_FAILED:10},r={UPLOAD:-1,NOT_READY:0,START:1,RUNNING:2,READY:3,ERROR:4,SPLIT:5,SPLIT_ERROR:6,TOKEN_EXCEED:7,TOKEN_LIMIT:8},d={"zh-CN":["上传中","待解析","解析中","解析失败","待校验","待上架","已上架","上架中","上架失败","切分中","切分失败","其他"],"zh-TW":["上傳中","待解析","解析中","解析失败","待校验","待上架","已上架","上架中","上架失敗","切分中","切分失敗","其他"],"en-US":["Uploading","Awaiting Parsing","Parsing","Parse Failed","Awaiting Verification","Awaiting Publish","Published","Publishing","Publish Failed","Splitting","Split Failed","Others"]},c={"zh-CN":["","通用问答","文档问答前","文档问答后","知识库问答"],"zh-TW":["","通用問答","文檔問答前","文檔問答後","知識庫問答"],"en-US":["","General Chat","Document Chat - Before Upload","Document Chat - After Upload","Knowledge Base Chat"]},p={"zh-CN":[{label:"全部",value:"ALL"},{label:"简体中文",value:"zh-cn"},{label:"繁体中文",value:"zh-hk"},{label:"英文",value:"en-us"},{label:"其他",value:"default"}],"zh-TW":[{label:"全部",value:"ALL"},{label:"簡體中文",value:"zh-cn"},{label:"繁體中文",value:"zh-hk"},{label:"英文",value:"en-us"},{label:"其他",value:"default"}],"en-US":[{label:"ALL",value:"ALL"},{label:"Chinese (Simplified)",value:"zh-cn"},{label:"Chinese (Traditional)",value:"zh-hk"},{label:"English",value:"en-us"},{label:"Others",value:"default"}]},g={"zh-CN":[{label:"全部",value:"ALL"},{label:"文本类型",value:"1"},{label:"QA类型",value:"2"}],"zh-TW":[{label:"全部",value:"ALL"},{label:"文本類型",value:"1"},{label:"QA類型",value:"2"}],"en-US":[{label:"ALL",value:"ALL"},{label:"Text",value:"1"},{label:"QA",value:"2"}]},v={"zh-CN":[{label:"全部",value:0},{label:"待解析",value:1},{label:"解析中",value:2},{label:"解析失败",value:3},{label:"待校验",value:4},{label:"待上架",value:5},{label:"已上架",value:6},{label:"上架中",value:7},{label:"上架失败",value:8},{label:"切分中",value:9},{label:"切分失败",value:10}],"zh-TW":[{label:"全部",value:0},{label:"待解析",value:1},{label:"解析中",value:2},{label:"解析失敗",value:3},{label:"待校驗",value:4},{label:"待上架",value:5},{label:"已上架",value:6},{label:"上架中",value:7},{label:"上架失敗",value:8},{label:"切分中",value:9},{label:"切分失敗",value:10}],"en-US":[{label:"ALL",value:0},{label:"Awaiting Parsing",value:1},{label:"Parsing",value:2},{label:"Parse Failed",value:3},{label:"Awaiting Verification",value:4},{label:"Awaiting Publish",value:5},{label:"Published",value:6},{label:"Publishing",value:7},{label:"Published Failed",value:8},{label:"Splitting",value:9},{label:"Splitted Failed",value:10}]},b={"zh-CN":[{label:"全部",value:0},{label:"通用问答",value:1},{label:"单文档问答前",value:2},{label:"单文档问答后",value:3},{label:"知识库问答",value:4},{label:"文档问答 - 文档对比",value:5}],"zh-TW":[{label:"全部",value:0},{label:"通用問答",value:1},{label:"單文檔問答前",value:2},{label:"單文檔問答後",value:3},{label:"知識庫問答",value:4},{label:"文檔問答 - 文檔對比",value:5}],"en-US":[{label:"ALL",value:0},{label:"General Chat",value:1},{label:"Document Chat - Before Upload",value:2},{label:"Document Chat - After Upload",value:3},{label:"Knowledge Base Chat",value:4},{label:"Document Chat - Document Comparison",value:5}]},h=()=>e.value in a?a[e.value]:a[t],f=()=>e.value in o?o[e.value]:o[t],m=()=>e.value in p?p[e.value]:p[t],k=()=>e.value in u?u[e.value]:u[t],y=()=>e.value in g?g[e.value]:g[t],S=()=>e.value in d?d[e.value]:d[t],L=()=>e.value in v?v[e.value]:v[t],T=()=>e.value in c?c[e.value]:c[t],w=()=>e.value in b?b[e.value]:b[t],_=(e,a)=>{if(e=~~e,a=~~a,a===r.UPLOAD)return 0;if(a===r.NOT_READY)return 1;if(a<=r.START)return 1;if(a===r.RUNNING)return 2;if(a===r.ERROR)return 3;if(a>=r.READY){if(e===i.DOCUMENT_WAIT_CONFIRM)return 4;if(e===i.DOCUMENT_WAIT_PUBLISH)return 5;if(e===i.DOCUMENT_PUBLISHED)return 6;if(e===i.DOCUMENT_STOP)return 5;if(e===i.DOCUMENT_PUBLISH_ING)return 7;if(e===i.DOCUMENT_PUBLISH_FAILED)return 8;if(e===i.DOCUMENT_SPLITTING)return 9;if(e===i.DOCUMENT_SPLIT_FAILED)return 10;if(e===i.DOCUMENT_SPLIT_SUCCESS)return 5}return 3},z=e=>1===e?{parserStates:r.NOT_READY+","+r.START,states:""}:2===e?{parserStates:r.RUNNING,states:""}:3===e?{parserStates:r.ERROR+","+r.TOKEN_EXCEED+","+r.TOKEN_LIMIT,states:""}:4===e?{parserStates:r.READY+","+r.SPLIT,states:i.DOCUMENT_WAIT_CONFIRM}:5===e?{parserStates:"",states:i.DOCUMENT_WAIT_PUBLISH+","+i.DOCUMENT_STOP+","+i.DOCUMENT_SPLIT_SUCCESS}:6===e?{parserStates:"",states:i.DOCUMENT_PUBLISHED}:7===e?{parserStates:"",states:i.DOCUMENT_PUBLISH_ING}:8===e?{parserStates:"",states:i.DOCUMENT_PUBLISH_FAILED}:9===e?{parserStates:"",states:i.DOCUMENT_SPLITTING}:10===e?{parserStates:"",states:i.DOCUMENT_SPLIT_FAILED}:{},C=(0,l.Kh)([]),R=(0,l.Kh)({}),F=(0,l.Kh)({}),I=(0,l.Kh)({}),A=(0,l.Kh)([]),E=(0,l.Kh)([]),P=(0,l.Kh)([]),x=(0,l.Kh)([]);return S().map((e=>{C.push(e)})),Object.keys(k()).map((e=>{R[e]=k()[e]})),Object.keys(f()).map((e=>{F[e]=f()[e]})),Object.keys(T()).map((e=>{I[e]=T()[e]})),L().map((e=>{E.push(e)})),m().map((e=>{A.push(e)})),y().map((e=>{P.push(e)})),w().map((e=>{x.push(e)})),(0,s.wB)((()=>e.value),(()=>{C.splice(0,C.length),S().map((e=>{C.push(e)})),Object.keys(R).map((e=>{R[e]=k()[e]})),Object.keys(F).map((e=>{F[e]=f()[e]})),E.splice(0,E.length),L().map((e=>{E.push(e)})),A.splice(0,A.length),m().map((e=>{A.push(e)})),P.splice(0,P.length),y().map((e=>{P.push(e)})),x.splice(0,x.length),w().map((e=>{x.push(e)}))})),{getLocaleOutputLang:h,getLocaleLangs:f,getLocaleTypes:k,getLocaleStatus:S,getLocaleLangOptions:m,getLocaleTypeOptions:y,getLocaleStatusOptions:L,translateState:_,queryState:z,STATES:C,TYPES:R,LANGS:F,SCOPES:I,StatusOptions:E,LangOptions:A,TypeOptions:P,ScopeOptions:x,STATE_PREV:i,STATE_NEXT:r}}},26497:function(e,a,t){function l(e){return e.replace(/(^,*)|(,*$)/g,"")}t.d(a,{QV:function(){return l}})},34197:function(e,a,t){t.d(a,{Cp:function(){return o},DX:function(){return w},Ds:function(){return h},Ji:function(){return p},MX:function(){return S},P:function(){return u},Q2:function(){return z},Qp:function(){return g},TF:function(){return c},Ty:function(){return f},WQ:function(){return r},ZJ:function(){return v},bc:function(){return _},co:function(){return T},ds:function(){return k},hc:function(){return d},lD:function(){return L},mk:function(){return m},n_:function(){return n},pq:function(){return y},q7:function(){return b},z6:function(){return i}});t(63307),t(43854),t(34817);var l=t(2324);const s="/api/v1";async function n(e){return(0,l.A)({url:s+"/knowledge/document/list",method:"POST",data:{...e,pageNum:e.page,pageSize:e.perPage}})}async function o(e){return(0,l.A)({url:s+"/knowledge/document/quick/list",method:"POST",data:{...e,pageNum:e.page,pageSize:e.perPage}})}async function u(e,a,t){return(0,l.A)({url:s+"/knowledge/document/get/"+e,method:"GET",params:{id:e,preview:a,split:t}})}async function i(e){return(0,l.A)({url:s+"/knowledge/document/quick/add",method:"POST",headers:{"Content-Type":"multipart/form-data"},data:e})}async function r(e){return(0,l.A)({url:s+"/knowledge/document/add",method:"POST",headers:{"Content-Type":"multipart/form-data"},data:e})}async function d(e){return(0,l.A)({url:s+"/knowledge/document/edit",method:"POST",data:e})}async function c(e){return(0,l.A)({url:s+"/knowledge/document/remove",method:"DELETE",data:e})}async function p(){return(0,l.A)({url:s+"/knowledge/document/quick/clear",method:"PUT"})}async function g(){return(0,l.A)({url:s+"/knowledge/document/quick/remove",method:"POST"})}async function v(e){return(0,l.A)({url:s+"/knowledge/document/quick/stopResume",method:"POST",data:e})}async function b(){return(0,l.A)({url:s+"/knowledge/document/quick/status",method:"POST"})}async function h(e){return(0,l.A)({url:s+"/knowledge/document/quick/count",method:"POST",data:e})}async function f(e){return(0,l.A)({url:s+"/knowledge/document/reanalyze",method:"GET",params:e})}async function m(e){const a=new URLSearchParams(e).toString();return(0,l.A)({url:s+"/knowledge/document/listing",method:"POST",data:a})}async function k(e){const a=new URLSearchParams(e).toString();return(0,l.A)({url:s+"/knowledge/document/delist",method:"POST",data:a})}async function y(e){return(0,l.A)({url:s+"/knowledge/associate/"+e.docId})}async function S(e){return(0,l.A)({url:s+"/knowledge/document/check",method:"POST",data:e})}async function L(e){return(0,l.A)({url:s+"/knowledge/document/split",method:"POST",data:e})}async function T(e){return(0,l.A)({url:s+"/knowledge/document/getSplits",method:"GET",params:e})}async function w(e){return(0,l.A)({url:s+"/knowledge/document/saveSplits",method:"POST",data:e})}async function _(e){return(0,l.A)({url:s+"/knowledge/document/splitStatus",method:"GET",params:e})}async function z(){return(0,l.A)({url:s+"/knowledge/document/tags",method:"GET"})}},36981:function(e,a,t){t.d(a,{A:function(){return b}});var l=t(28694);const s={class:"main-content-screen"},n={class:"screen-header"},o={class:"header-search"},u={class:"screen-content",ref:"conentRef"},i={class:"content-data",style:{gap:"16px"}},r={class:"screen-footer"},d={class:"footer-pagination"};function c(e,a,t,c,p,g){const v=(0,l.g2)("el-skeleton-item"),b=(0,l.g2)("el-skeleton");return(0,l.uX)(),(0,l.CE)("div",s,[(0,l.Lk)("div",n,[(0,l.bF)(b,{animated:""},{template:(0,l.k6)((()=>[(0,l.Lk)("div",o,[(0,l.bF)(v,{variant:"text",style:{height:"28px"}}),(0,l.bF)(v,{variant:"text",style:{height:"28px"}}),(0,l.bF)(v,{variant:"text",style:{height:"28px"}}),(0,l.bF)(v,{variant:"text",style:{height:"28px"}})])])),_:1})]),(0,l.Lk)("div",u,[(0,l.bF)(b,{animated:""},{template:(0,l.k6)((()=>[(0,l.Lk)("div",i,[(0,l.bF)(v,{variant:"text",style:{height:"28px"}}),(0,l.bF)(v,{variant:"text",style:{height:"28px"}}),(0,l.bF)(v,{variant:"text",style:{height:"28px"}}),(0,l.bF)(v,{variant:"text",style:{height:"28px"}})])])),_:1})],512),(0,l.Lk)("div",r,[(0,l.bF)(b,{animated:""},{template:(0,l.k6)((()=>[(0,l.Lk)("div",d,[(0,l.bF)(v,{variant:"text",style:{height:"28px",width:"128px"}}),(0,l.bF)(v,{variant:"text",style:{height:"28px",width:"128px"}})])])),_:1})])])}var p=(0,l.pM)({name:"SkeleteTable",setup(e,a){}}),g=t(83940);const v=(0,g.A)(p,[["render",c],["__scopeId","data-v-60855484"]]);var b=v},18684:function(e,a,t){t.d(a,{A:function(){return d}});var l=t(28694),s=t(83487),n=t(38118);const o={key:1};var u=(0,l.pM)({__name:"Tooltip",props:{content:{},placement:{},className:{},showArrow:{type:Boolean,default:!0},offset:{default:0}},setup(e){const a=(0,l.Ht)(),t=(0,n.KR)(!0),u=(0,n.KR)(null),i=()=>{if(u.value){const e=u.value?.parentNode?.parentNode?.offsetWidth,a=u.value.offsetWidth;t.value=!(a>e)}};return(e,r)=>{const d=(0,l.g2)("el-tooltip");return(0,l.uX)(),(0,l.Wv)(d,{class:"el-tooltip",effect:"light",disabled:t.value,content:e.content,placement:e.placement,"show-arrow":e.showArrow,offset:e.offset},{default:(0,l.k6)((()=>[(0,l.Lk)("span",{class:"over-flow",onMouseover:i},[(0,l.Lk)("span",{ref_key:"refName",ref:u,class:(0,s.C4)(e.className)},[(0,n.R1)(a).default?(0,l.RG)(e.$slots,"default",{key:0}):((0,l.uX)(),(0,l.CE)("span",o,(0,s.v_)(e.content||"-"),1))],2)],32)])),_:3},8,["disabled","content","placement","show-arrow","offset"])}}}),i=t(83940);const r=(0,i.A)(u,[["__scopeId","data-v-7d8873d0"]]);var d=r},31133:function(e,a,t){t.r(a),t.d(a,{default:function(){return Te}});t(14898);var l=t(28694),s=t(83487),n=t(38118),o=t(97913),u=t(32228),i=t(74560),r=t(19477),d=t(12567),c=t(47679),p=t(36981),g=t(52582),v=t(18684),b=t(94102),h=t(51832),f=t(26497),m=t(81329),k=t(34197),y=t(74913),S=t(98836),L=t(1421),T=t.n(L);const w=e=>((0,l.Qi)("data-v-5b60a427"),e=e(),(0,l.jt)(),e),_={class:"main"},z={class:"main-top"},C={class:"main-top-nav"},R={class:"main-top-batch"},F={class:"th-s-label"},I={class:"th-s-label"},A={class:"th-s-label"},E={class:"th-s-label"},P={class:"th-s-label"},x={class:"th-s"},D={class:"actions"},U={class:"uploadForm-flex"},N={class:"uploadForm-left"},W={key:0,class:"flex-right"},O=["href"],X={class:"dialog-hint"},K={class:"tag-flex"},M={class:"upload"},V={class:"upload-plus upload-flex"},H={class:"upload-text"},Q={class:"upload-hint"},B={key:0},q={key:1},G={class:"uploadForm-right"},j={class:"upload-progress-header"},$={class:"title"},Y={class:"hint"},J={class:"icon"},Z={class:"title"},ee={class:"name"},ae={class:"kb"},te={class:"actions"},le={class:"dialog-footer"},se={class:"tag-flex"},ne={class:"dialog-footer"},oe={class:"top"},ue=w((()=>(0,l.Lk)("div",{class:"upload-state-icon"},[(0,l.Lk)("img",{src:"/images/upload-state.png",class:"wh92"})],-1))),ie={class:"upload-state-title"},re={class:"upload-state-success"},de={class:"upload-state-fail"},ce={class:"upload-state-expand"},pe={key:0,class:"list"},ge={class:"icon"},ve={class:"name"},be={class:"text"},he={class:"kb"},fe={class:"time"},me={class:"actions"},ke={class:"preview"};var ye=(0,l.pM)({__name:"index",setup(e){const{locale:a,t:t}=(0,u.s9)(),L=(0,S.rd)(),w=(0,y.Pj)(),ye=(0,l.EW)((()=>w.state.user.currentUser)),{STATES:Se,TYPES:Le,LANGS:Te,LangOptions:we,StatusOptions:_e,TypeOptions:ze,translateState:Ce,queryState:Re}=(0,h.A)(),Fe=(0,n.Kh)({reload:!0,loading:!1,list:[],pagination:{total:0,current:w.state.organize.page,pageSize:w.state.organize.perPage,sizes:[10,50,100,1e3],sizeChange:()=>{},onChange:e=>{}}}),Ie=(0,n.KR)([]),{pushQuery:Ae,queryParams:Ee}=(0,b.A)("/organize/document",(async(e,a)=>{Fe.loading=!0;const t=await(0,k.n_)(e),{rows:l}=t,s=l||[];Fe.list=s.map((e=>(e.docTags=(0,f.QV)(e.docTags||""),e.tags=""!==e.docTags?e.docTags.split(","):[],e.type=Le[e.docType],e.lang=Te[e.docLang||"zh-cn"],e.translateState=Ce(e.state,e.parserState),e.parserDetail=3!==e.translateState?e.parserDetail:"Parse Error",e))),Fe.pagination={total:t.total||0,current:e.page,pageSize:e.perPage,sizes:[10,50,100,1e3],sizeChange:async e=>{Fe.reload=!1,await La({perPage:e,page:1}),setTimeout((()=>Fe.reload=!0),400)},onChange:e=>La({page:e})},ra(),Fe.loading=!1})),Pe=e=>{Ie.value=e},xe=(0,l.EW)((()=>w.state.global.openBulkUpload)),De=(0,l.EW)((()=>0===Ie.value.length)),Ue=(0,l.EW)((()=>0===Ie.value.length)),Ne=(0,l.EW)((()=>0===Ie.value.length)),We=(0,l.EW)((()=>0===Ie.value.length)),Oe=(0,n.KR)(!1),Xe=(0,n.KR)(!1),Ke=(0,n.KR)(!1),Me=(0,n.KR)(!1),Ve=(0,n.KR)(!1),He=(0,n.KR)(!1),Qe=(0,n.KR)(null),Be=(0,n.KR)(!1),qe=(0,n.Kh)({id:0,name:"",lang:"",tags:[]}),Ge=((0,n.KR)(!1),(0,n.KR)(null),(0,n.KR)(!1)),je=(0,n.KR)({lang:"1",tags:[],type:"",files:[]}),$e=(0,n.KR)(!1),Ye=(0,n.KR)(null),Je=(0,n.Kh)({lang:[{required:!0,trigger:"change"}],name:[{required:!0,trigger:"blur"}],type:[{required:!0,trigger:"change"}]}),Ze=(0,n.Kh)({show:!1,uuid:"",history:{},sourceUrl:"",docName:""}),ea=(0,n.KR)([]),aa=(0,n.Kh)({fileList:[],show:!1,success:0,fail:0,type:"expand"}),ta=(0,n.KR)("/preview/SampleQAData.xlsx"),la={"File is empty":"The file is empty","Invalid file format":"Non-compliant with QA","Error embedding content":"Error embedding content","Unknown error":"Unknown error"};let sa=1,na=0;const oa=async()=>{na&&(clearInterval(na),na=0),na=setInterval((async()=>{let e=!1;for(const t in aa.fileList){const{state:l,parserState:s,docId:n}=aa.fileList[t];if(0!==Ce(l,s)&&3!==Ce(l,s)){if(!aa.fileList[t].error&&(1===Ce(l,s)||2===Ce(l,s))){if(n&&n.length>10)try{const e=await(0,k.P)(n);e&&e.data&&(aa.fileList[t].state=~~e.data.state,aa.fileList[t].parserState=~~e.data.parserState,Fe.list.forEach((a=>{a.docId===e.data.docId&&(a.state=e.data.state,a.parserState=e.data.parserState,a.parserDetail=4!==e.data.parserState?e.data.parserDetail:"Parse Failed",a.translateState=Ce(a.state,a.parserState))})))}catch(a){aa.fileList[t].error=a?.response?.data?.msg||"Failed",console.log(a)}aa.fileList[t].translateState<=2&&(e=!0)}}else e=!0}aa.success=aa.fileList.filter((e=>Ce(e.state,e.parserState)<=2)).length,aa.fail=aa.fileList.filter((e=>3===Ce(e.state,e.parserState))).length,sa++,(!e||sa>600)&&(clearInterval(na),sa=1,na=0,aa.show=!1,aa.fileList=[])}),1e3)};let ua=1,ia=0;const ra=async()=>{ia&&(clearInterval(ia),ua=1),ia=setInterval((async()=>{let e=!1;Fe.list.forEach((async a=>{if(1===a.translateState||2===a.translateState||7===a.translateState||9===a.translateState){e=!0;try{const e=await(0,k.P)(a.docId);if(e&&e.data){const l=~~e.data.state;7===a.state&&1===l&&i.nk.error(t("page.organizes.docus.reverify")),a.state=l,a.parserState=~~e.data.parserState,a.parserDetail=4!==a.parserState?e.data.parserDetail:"Parse Failed",a.translateState=Ce(a.state,a.parserState)}}catch(l){console.log(l)}}})),ua++,(!e||ua>600)&&(clearInterval(ia),ua=1,ia=0)}),6e3)};let da=1,ca=0;const pa=async e=>{ca&&(clearInterval(ca),da=1),ca=setInterval((async()=>{let a=!1;for(const l of e)try{const e=Fe.list.findIndex((e=>e.docId===l));if(-1!==e&&4!==Fe.list[e].translateState)continue;a=!0;const t=await(0,k.P)(l);t&&t.data&&-1!==e&&(Fe.list[e].state=~~t.data.state,Fe.list[e].parserState=~~t.data.parserState,Fe.list[e].translateState=Ce(Fe.list[e].state,Fe.list[e].parserState))}catch(t){console.log(t)}da++,(!a||da>60)&&(clearInterval(ca),da=1,ca=0)}),1e3)},ga=(0,n.KR)(""),va=(0,n.KR)(!1),ba=((0,n.KR)(),(0,n.KR)(["Tag","T","A","G"])),ha=(0,n.KR)([]),fa=["primary","info","warning","error","warning","primary","success","success"],ma=(0,n.Kh)([{label:"全部",value:"ALL"},{label:"医学",value:"医学"},{label:"财经",value:"财经"},{label:"保险",value:"保险"},{label:"其他",value:"其他"}]),ka=(0,n.Kh)(w.state.organize.searchInput),ya=(0,l.EW)((()=>we.filter((e=>"ALL"!==e.value)))),Sa=(0,l.EW)((()=>ze.filter((e=>"ALL"!==e.value)))),La=((0,l.EW)((()=>ma.filter((e=>"ALL"!==e.value)))),async e=>{const a={...ka,...Re(ka.state),perPage:Fe.pagination.pageSize,page:Fe.pagination.current,...e,refresh:(0,m.pr)(new Date)};"ALL"===a.docLang&&delete a.docLang,"ALL"===a.docType&&delete a.docType,"ALL"===a.docTags&&delete a.docTags,delete a.state,delete a.parserState,Ae(a)}),Ta=async()=>{ka.docName="",ka.docLang="ALL",ka.state=0,ka.docType="ALL",ka.docTags="ALL",Fe.reload=!1,await La({page:1}),setTimeout((()=>Fe.reload=!0),400)};La({}),(0,l.nT)((()=>{const e=[];Ee.value.categoryId&&Ee.value.categoryId.split(",").map((a=>{a&&e.push(Number(a))}));const a={keywords:Ee.value.keywords||"",category:e,datetime:Ee.value.startTime&&Ee.value.endTime?[Ee.value.startTime,Ee.value.endTime]:[],tags:Ee.value.tags?Ee.value.tags.split(","):[]};ka.name=a.keywords}));const wa=async()=>{if(Qe.value?.toggleSelect([6]),Ie.value=Ie.value.filter((e=>6===e.translateState)),0===Ie.value.length)return void i.nk.error(t("page.organizes.docus.selectHint"));let e=`<p>${t("page.organizes.docus.batchStopHintDetail")}</p>`;r.s.confirm(e,t("page.organizes.docus.hint"),{dangerouslyUseHTMLString:!0,confirmButtonText:t("page.organizes.docus.buttonSubmit"),cancelButtonText:t("page.organizes.docus.buttonCancel"),type:"warning"}).then((async()=>{Ke.value=!0;let e=Ie.value.map((e=>e.docId));const a=e.join(",");await(0,k.ds)({ids:a});i.nk.success(t("page.organizes.successMessage")),Ke.value=!1,La({refresh:(0,m.pr)(new Date)})})).catch((()=>{Ke.value=!1}))},_a=async()=>{if(Qe.value?.toggleSelect([5,8]),Ie.value=Ie.value.filter((e=>5===e.translateState||8===e.translateState)),0===Ie.value.length)return void i.nk.error(t("page.organizes.docus.selectHint"));Xe.value=!0;let e=1;Ie.value.map((async a=>{2===a.docType&&(await(0,k.P)(a.docId,void 0,void 0),await(0,k.lD)({docId:a.docId}),e++)}));let a=Ie.value.map((e=>e.docId));const l=a.join(",");setTimeout((async()=>{const e=await(0,k.mk)({ids:l});if(e&&500===~~e.code&&"resplit"===e.msg)return Xe.value=!1,void i.nk.error("Please verify first before clicking 'Publish'");i.nk.success(t("page.organizes.successMessage")),Xe.value=!1,ra(),La({})}),1e3*e)},za=async()=>{if(0===Ie.value.length)return void i.nk.error(t("page.organizes.docus.selectHint"));let e=`<p>${t("page.organizes.docus.batchDeleteHintDetail")}</p>`;r.s.confirm(e,t("page.organizes.docus.hint"),{dangerouslyUseHTMLString:!0,confirmButtonText:t("page.organizes.docus.buttonSubmit"),cancelButtonText:t("page.organizes.docus.buttonCancel"),customClass:"del-message-box",type:"warning"}).then((async()=>{Oe.value=!0;let e=Ie.value.map((e=>e.docId));const a=e.join(",");await(0,k.TF)({docIds:a});i.nk.success(t("page.organizes.docus.deleteSuccess")),Oe.value=!1,La({refresh:(0,m.pr)(new Date)})})).catch((()=>{Oe.value=!1}))},Ca=e=>{console.error(e)},Ra=e=>{},Fa=e=>{e?.stopPropagation(),va.value=!1,ga.value=""},Ia=async()=>{if(Qe.value?.toggleSelect([4]),Ie.value=Ie.value.filter((e=>4===e.translateState)),0===Ie.value.length)return void i.nk.error(t("page.organizes.docus.selectHint"));Me.value=!0;Ie.value.map((async e=>{await(0,k.P)(e.docId,void 0,void 0),await(0,k.lD)({docId:e.docId})}));let e=Ie.value.map((e=>e.docId));pa(e),La({}),Me.value=!1},Aa=async()=>{const e=await(0,k.q7)();e.data.progress&&e.data.admin!==ye.value.name?i.nk.error(t("page.organizes.docus.batchQuickHint")):L.push({path:"/organize/quick"})},Ea=async e=>{aa.fileList.filter((e=>4!==e.parserState)).length>0?i.nk.error("The document is being uploaded, please process it later."):(je.value.type="text"===e?"1":"2",je.value.typeStr=Sa.value.find((e=>e.value===je.value.type))?.label,je.value.typeStr="2"===je.value.type?je.value.typeStr+" ("+t("page.organizes.docus.dialogXlsxHint")+")":je.value.typeStr,je.value.lang="zh-cn",je.value.tags=[],je.value.files=[],ea.value=[],Ve.value=!1,Ge.value=!0)},Pa=e=>{Be.value=!0,qe.row=e,qe.docId=e.docId,qe.name=e.docName,qe.lang=e.docLang,qe.tags=e.docTags?e.docTags.split(","):[]},xa=async()=>{const e=qe.lang&&qe.name;e?(await(0,k.hc)({docId:qe.docId,docLang:qe.lang,docName:qe.name,docTags:qe.tags.join(",")}),Za(),i.nk.success(t("page.organizes.successMessage")),qe.row.docName=qe.name,qe.row.docLang=qe.lang,qe.row.docTags=qe.tags.join(","),qe.row.tags=qe.tags,qe.row.lang=Te[qe.lang],Be.value=!1):i.nk.error(t("page.organizes.docus.errorForm"))},Da=async e=>{await(0,k.P)(e.docId,"preview",null),Ze.show=!0,Ze.uuid=e.docId,Ze.sourceUrl=e.sourceFile,Ze.docName=e.docName},Ua=async e=>{e["reParseLoading"]=!0,(0,k.Ty)({docId:e.docId}).then((a=>{e["reParseLoading"]=!1})),e.translateState=2,ra()},Na=e=>{L.push({path:"/organize/document/preview/"+e.docId+"?split=1",query:{split:1}})},Wa=async e=>{const a=await(0,k.bc)({docId:e.docId});if(a?.data){const a=t("page.organizes.docus.splitDetail"),l=t("page.organizes.docus.hint");r.s.confirm(a,l,{confirmButtonText:t("page.organizes.docus.buttonSubmit"),cancelButtonText:t("page.organizes.docus.buttonCancel"),type:"warning"}).then((()=>{L.push({path:"/organize/document/preview/"+e.docId})}))}else L.push({path:"/organize/document/preview/"+e.docId})},Oa=async e=>{const a=await(0,k.mk)({ids:e.docId});return a&&500===~~a.code&&(He.value=!1,"resplit"===a.msg)?(e["hide"]=!0,void i.nk.error("Please verify first before clicking 'Publish'")):a&&200!==~~a.code?(i.nk.error("System Error "+a.msg),He.value=!1,void(e["publishLoading"]=!1)):(e.state=7,e.translateState=7,e["publishLoading"]=!1,He.value=!1,void ra())},Xa=async e=>{if(He.value)i.nk.error("Document publishing in progress. Please try again later.");else{He.value=!0,e["publishLoading"]=!0,e["hide"]=!1;try{if(await(0,k.P)(e.docId,void 0,void 0),2===e.docType)return await(0,k.lD)({docId:e.docId}),void setTimeout((async()=>{Oa(e)}),1e3);Oa(e)}catch(a){console.log(a)}}},Ka=async e=>{const a=await(0,k.pq)({docId:e.docId});if(e.knowledgeCount=a?.data.length||0,0===e.knowledgeCount)return await(0,k.ds)({ids:e.docId}),i.nk.success(t("page.organizes.successMessage")),e.state=4,void(e.translateState=5);let l=`<p>${t("page.organizes.docus.stopHintDetail",{knowledgeCount:e.knowledgeCount})}</p>`;a?.data.map((e=>{l+=`<el-tag class="el-tag el-tag--success__hint el-tag--light color-huge">${e.knowledgeName}</el-tag> `})),r.s.confirm(l,t("page.organizes.docus.hint"),{dangerouslyUseHTMLString:!0,confirmButtonText:t("page.organizes.docus.buttonSubmit"),cancelButtonText:t("page.organizes.docus.buttonCancel"),customClass:"del-message-box",type:"warning"}).then((async()=>{await(0,k.ds)({ids:e.docId}),i.nk.success(t("page.organizes.successMessage")),e.state=4,e.translateState=5})).catch((()=>{}))},Ma=(e,a)=>e.translateState>0,Va=e=>e.name.includes(".xls")?"pk-xlsx":e.name.includes(".md")?"pk-md":e.name.includes(".doc")?"pk-docx":e.name.includes(".ppt")||e.name.includes(".txt")?"pk-txt":"pk-pdf";(0,l.nT)((()=>{"zh-CN"===a.value||"zh-TW"===a.value?ta.value="/preview/SampleQAData.xlsx":ta.value="/preview/SampleQAData-EN.xlsx"}));const Ha=e=>{if(""===je.value.type)return i.nk.error(t("page.organizes.docus.errorType")),!1;const a=e.name.replace(/.+\./,"");if(2===~~je.value.type&&!["xlsx"].includes(a))return i.nk.error('Please upload "QA" documents, including XLSX files.'),!1;if(2!==~~je.value.type&&!["docx","pdf","md","txt"].includes(a))return i.nk.error('Please upload "text" documents, including PDF, DOCX, MD and TXT files.'),!1;const l=e.name;if(l.match(/\[|\]|\^|\$|￥/g))return i.nk.error("Please do not use special characters in the file name."),!1;const s=104857600;return s<e.size?(i.nk.error("Exceed Limit 100M"+e.name),!1):(Ve.value=!0,!0)},Qa=()=>{i.nk.error(t("page.organizes.docus.exceedLimit",{limit:10}))},Ba=async e=>{},qa=e=>{ea.value.splice(e,1)},Ga=e=>{aa.fileList.splice(e,1),0===aa.fileList.length&&(aa.show=!1)},ja=e=>new Promise(((a,t)=>{const l=new FileReader(e);l.readAsText(e,"utf-8"),l.onload=e=>{const t=e.target.result,l=T().MD5(t).toString(T().enc.Hex);a(l)}})),$a=async()=>{je.value.tags.length>0&&je.value.type&&je.value.lang;$e.value=!0,aa.fileList=[],aa.success=0,aa.fail=0,aa.type="expand";const e=[],a=[];for(let s=0;s<ea.value.length;s++){const l=new FormData;l.append("docTags",je.value.tags.join(",")),l.append("docType",je.value.type),l.append("docLang",je.value.lang),l.append("file",ea.value[s].raw);const n=await ja(ea.value[s].raw);e.includes(n)?i.nk.error(t("page.organizes.docus.fileDup")+ea.value[s].name):(e.push(n),aa.fileList[s]={state:0,parserState:-1,uploadedAt:(0,m.pr)(new Date),name:ea.value[s].name,raw:ea.value[s].raw,md5:n,size:ea.value[s].size},aa.success=aa.fileList.filter((e=>Ce(e.state,e.parserState)<=2)).length,aa.fail=aa.fileList.filter((e=>3===Ce(e.state,e.parserState))).length,a.push(new Promise(((e,a)=>{((l,s)=>{(0,k.WQ)(s).then((n=>{if(Za(),n&&"object"===typeof n.data){if(1===n.data.code||5===n.data.code)return aa.fileList[l].parserState=4,aa.fileList[l].error=t("page.organizes.docus.fileDup"),i.nk.error(t("page.organizes.docus.fileDup")+s.get("file").name),void e();n&&200!==n.code?(aa.fileList[l].parserState=4,aa.fileList[l].error=n.msg,a()):n&&n.data&&(n.data.lang=Te[n.data.docLang],n.data.type=Le[n.data.docType],n.data.tags=n.data.docTags?n.data.docTags.split(","):[],n.data.translateState=Ce(n.data.state,n.data.parserState),n.data.parserDetail=3!==n.data.translateState?n.data.parserDetail:"Parse Failed",Fe.list.unshift(n.data),ra(),aa.fileList[l]&&(aa.fileList[l].docId=n.data.docId,aa.fileList[l].state=n.data.state>0?n.data.state:1,aa.fileList[l].parserState=n.data.parserState?n.data.parserState:4),Ce(aa.fileList[l].state,aa.fileList[l].parserState)>=4&&(0,k.P)(n.data.docId),3===Ce(aa.fileList[l].state,aa.fileList[l].parserState)&&delete aa.fileList[l],i.nk.success(t("page.organizes.docus.uploadSuccess")+s.get("file").name)),e()}else n&&200!==n.code&&(aa.fileList[l].parserState=4,aa.fileList[l].error=n.msg,a())})).catch((e=>{aa.fileList[l].parserState=4,aa.fileList[l].error=e.msg,a()}))})(s,l)}))))}ea.value=[],je.value.tags=[],$e.value=!1,Ge.value=!1,aa.show=!0,oa();try{await Promise.all(a)}catch(l){console.error(l)}},Ya=async(e,a)=>{const l=await(0,k.pq)({docId:a.docId});a.knowledgeCount=l&&l.data?l.data.length:0;let s=`<p>${t("page.organizes.docus.deleteHintDetail",{knowledgeCount:a.knowledgeCount})}</p>`;l?.data.map((e=>{s+=`<el-tag class="el-tag el-tag--success__hint el-tag--light color-huge">${e.knowledgeName}</el-tag> `})),a.hintHtml=s,await Ja(e,a)},Ja=async(e,a)=>{Fe.list[e]["delLoading"]=!0;try{r.s.confirm(a.hintHtml,t("page.organizes.docus.hint"),{dangerouslyUseHTMLString:!0,confirmButtonText:t("page.organizes.docus.buttonSubmit"),cancelButtonText:t("page.organizes.docus.buttonCancel"),customClass:"del-message-box",type:"warning"}).then((async()=>{await(0,k.TF)({docIds:a.docId}),i.nk.success(t("page.organizes.docus.deleteSuccess")),Fe.list.length>1?Fe.list.splice(e,1):La({refresh:(0,m.pr)(new Date)})})).catch((()=>{Fe.list[e]["delLoading"]=!1}))}catch(l){i.nk.warning(l.msg||l||"error"),Fe.list[e]["delLoading"]=!1}};(0,l.sV)((async()=>{ra(),Za();const e=await(0,k.q7)();e&&e.data.progress&&L.push({path:"/organize/quick"})})),(0,l.hi)((()=>{w.commit("organize/settingState",{searchInput:ka,page:Fe.pagination.current,perPage:Fe.pagination.pageSize}),clearInterval(na),clearInterval(ia),clearInterval(ca)}));const Za=()=>{(0,k.Q2)().then((e=>{ba.value=e.data,ha.value=["ALL",...e.data]}))},et=(e,a)=>{let t;return(...l)=>{t&&clearTimeout(t),t=setTimeout((()=>{e(...l)}),a)}},at=window.ResizeObserver;return window.ResizeObserver=class extends at{constructor(e){e=et(e,100),super(e)}},window.onbeforeunload=function(){if(aa.fileList.length)return t("page.organizes.docus.unload")},window.addEventListener("beforeunload",(e=>{aa.fileList.length&&(e.returnValue=t("page.organizes.docus.unload"))})),(e,a)=>{const u=(0,l.g2)("el-button"),i=(0,l.g2)("el-dropdown-item"),r=(0,l.g2)("el-dropdown-menu"),b=(0,l.g2)("el-dropdown"),h=(0,l.g2)("el-input"),f=(0,l.g2)("el-col"),m=(0,l.g2)("el-option"),k=(0,l.g2)("el-select"),y=(0,l.g2)("el-row"),S=(0,l.g2)("el-table-column"),L=(0,l.g2)("el-tag"),T=(0,l.g2)("el-tooltip"),w=(0,l.g2)("el-form-item"),ye=(0,l.g2)("el-radio"),Le=(0,l.g2)("el-radio-group"),Te=(0,l.g2)("el-upload"),Re=(0,l.g2)("el-form"),Ie=(0,l.g2)("el-dialog"),Ae=(0,l.gN)("loading");return(0,l.uX)(),(0,l.CE)("div",_,[(0,l.Lk)("div",z,[(0,l.Lk)("div",C,(0,s.v_)((0,n.R1)(t)("page.organizes.docus.topNav")),1),(0,l.Lk)("div",R,[(0,l.bF)(u,{type:"primary",onClick:a[0]||(a[0]=e=>Ea("qa"))},{icon:(0,l.k6)((()=>[(0,l.bF)((0,n.R1)(d.A),{type:"pk-plus"})])),default:(0,l.k6)((()=>[(0,l.eW)(" "+(0,s.v_)((0,n.R1)(t)("page.organizes.docus.addQa")),1)])),_:1}),(0,l.bF)(u,{type:"primary",onClick:a[1]||(a[1]=e=>Ea("text"))},{icon:(0,l.k6)((()=>[(0,l.bF)((0,n.R1)(d.A),{type:"pk-plus"})])),default:(0,l.k6)((()=>[(0,l.eW)(" "+(0,s.v_)((0,n.R1)(t)("page.organizes.docus.addText")),1)])),_:1}),xe.value?((0,l.uX)(),(0,l.Wv)(u,{key:0,onClick:Aa},{icon:(0,l.k6)((()=>[(0,l.bF)((0,n.R1)(d.A),{type:"pk-quickpage"})])),default:(0,l.k6)((()=>[(0,l.eW)(" "+(0,s.v_)((0,n.R1)(t)("page.organizes.docus.batchQuick")),1)])),_:1})):(0,l.Q3)("",!0),(0,l.bF)(b,null,{dropdown:(0,l.k6)((()=>[(0,l.bF)(r,null,{default:(0,l.k6)((()=>[(0,l.bo)(((0,l.uX)(),(0,l.Wv)(i,{disabled:We.value,onClick:Ia},{default:(0,l.k6)((()=>[(0,l.bF)((0,n.R1)(d.A),{class:"mr",type:"pk-batchstop"}),(0,l.eW)(" "+(0,s.v_)((0,n.R1)(t)("page.organizes.docus.batchConfirm")),1)])),_:1},8,["disabled"])),[[Ae,Me.value]]),(0,l.bo)(((0,l.uX)(),(0,l.Wv)(i,{disabled:Ue.value,onClick:_a},{default:(0,l.k6)((()=>[(0,l.bF)((0,n.R1)(d.A),{class:"mr",type:"pk-batchstop"}),(0,l.eW)(" "+(0,s.v_)((0,n.R1)(t)("page.organizes.docus.batchPublish")),1)])),_:1},8,["disabled"])),[[Ae,Xe.value]]),(0,l.bo)(((0,l.uX)(),(0,l.Wv)(i,{disabled:Ne.value,onClick:wa},{default:(0,l.k6)((()=>[(0,l.bF)((0,n.R1)(d.A),{class:"mr",type:"pk-batchpublish"}),(0,l.eW)(" "+(0,s.v_)((0,n.R1)(t)("page.organizes.docus.batchStop")),1)])),_:1},8,["disabled"])),[[Ae,Ke.value]]),(0,l.bo)(((0,l.uX)(),(0,l.Wv)(i,{disabled:De.value,onClick:za},{default:(0,l.k6)((()=>[(0,l.bF)((0,n.R1)(d.A),{class:"mr",type:"pk-batchdelete"}),(0,l.eW)(" "+(0,s.v_)((0,n.R1)(t)("page.organizes.docus.batchDel")),1)])),_:1},8,["disabled"])),[[Ae,Oe.value]])])),_:1})])),default:(0,l.k6)((()=>[(0,l.bF)(u,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)((0,n.R1)(t)("page.organizes.docus.bulkActions"))+" ",1),(0,l.bF)((0,n.R1)(d.A),{class:"ml",type:"arrow-down"})])),_:1})])),_:1})])]),Fe.reload?((0,l.uX)(),(0,l.Wv)(c.A,{key:0,ref_key:"screenTableRef",ref:Qe,"row-key":"docId",data:Fe.list,loading:Fe.loading,pagination:Fe.pagination,onHandleSelection:Pe},{header:(0,l.k6)((()=>[(0,l.bF)(y,{onKeydown:(0,o.jR)(La,["enter"])},{default:(0,l.k6)((()=>[(0,l.bF)(f,{span:4},{default:(0,l.k6)((()=>[(0,l.Lk)("span",F,(0,s.v_)((0,n.R1)(t)("page.organizes.docus.th-s-name")),1),(0,l.bF)(h,{class:"th-s-input",modelValue:ka.docName,"onUpdate:modelValue":a[2]||(a[2]=e=>ka.docName=e),placeholder:(0,n.R1)(t)("page.organizes.docus.th-s-name-holder")},null,8,["modelValue","placeholder"])])),_:1}),(0,l.bF)(f,{span:4,class:"text-align-right"},{default:(0,l.k6)((()=>[(0,l.Lk)("span",I,(0,s.v_)((0,n.R1)(t)("page.organizes.docus.th-s-lang")),1),(0,l.bF)(k,{class:"th-s-input w200",modelValue:ka.docLang,"onUpdate:modelValue":a[3]||(a[3]=e=>ka.docLang=e)},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)((0,n.R1)(we),(e=>((0,l.uX)(),(0,l.Wv)(m,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(f,{span:4},{default:(0,l.k6)((()=>[(0,l.Lk)("span",A,(0,s.v_)((0,n.R1)(t)("page.organizes.docus.th-s-status")),1),(0,l.bF)(k,{class:"th-s-input",modelValue:ka.state,"onUpdate:modelValue":a[4]||(a[4]=e=>ka.state=e)},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)((0,n.R1)(_e),(e=>((0,l.uX)(),(0,l.Wv)(m,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(f,{span:4},{default:(0,l.k6)((()=>[(0,l.Lk)("span",E,(0,s.v_)((0,n.R1)(t)("page.organizes.docus.th-s-tags")),1),(0,l.bF)(k,{class:"th-s-input",modelValue:ka.docTags,"onUpdate:modelValue":a[5]||(a[5]=e=>ka.docTags=e),clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:(0,n.R1)(t)("page.organizes.docus.th-s-tags-holder")},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(ha.value,(e=>((0,l.uX)(),(0,l.Wv)(m,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1}),(0,l.bF)(f,{span:4},{default:(0,l.k6)((()=>[(0,l.Lk)("span",P,(0,s.v_)((0,n.R1)(t)("page.organizes.docus.th-s-type")),1),(0,l.bF)(k,{class:"th-s-input",modelValue:ka.docType,"onUpdate:modelValue":a[6]||(a[6]=e=>ka.docType=e)},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)((0,n.R1)(ze),(e=>((0,l.uX)(),(0,l.Wv)(m,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(f,{span:4},{default:(0,l.k6)((()=>[(0,l.Lk)("div",x,[(0,l.bF)(u,{class:"th-s-button color-huge border-huge",onClick:Ta},{icon:(0,l.k6)((()=>[(0,l.bF)((0,n.R1)(d.A),{type:"pk-refresh"})])),default:(0,l.k6)((()=>[(0,l.eW)(" "+(0,s.v_)((0,n.R1)(t)("page.organizes.docus.th-s-reset")),1)])),_:1}),(0,l.bF)(u,{class:"th-s-button",type:"primary",onClick:La},{icon:(0,l.k6)((()=>[(0,l.bF)((0,n.R1)(d.A),{type:"pk-search"})])),default:(0,l.k6)((()=>[(0,l.eW)(" "+(0,s.v_)((0,n.R1)(t)("page.organizes.docus.th-s")),1)])),_:1})])])),_:1})])),_:1})])),default:(0,l.k6)((()=>[(0,l.bF)(S,{type:"selection",width:"46",selectable:Ma}),(0,l.bF)(S,{type:"index",width:"66",label:(0,n.R1)(t)("page.organizes.docus.tb-label-no")},null,8,["label"]),(0,l.bF)(S,{label:(0,n.R1)(t)("page.organizes.docus.tb-label-name"),prop:"docName","min-width":"220"},null,8,["label"]),(0,l.bF)(S,{label:(0,n.R1)(t)("page.organizes.docus.tb-label-lang"),prop:"lang",width:"160"},null,8,["label"]),(0,l.bF)(S,{label:(0,n.R1)(t)("page.organizes.docus.tb-label-tags"),width:"140"},{default:(0,l.k6)((({row:e})=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.tags,(e=>((0,l.uX)(),(0,l.Wv)(L,{class:"tag-tool",type:"info",key:e},{default:(0,l.k6)((()=>[(0,l.bF)(v.A,{content:e,placement:"left"},null,8,["content"])])),_:2},1024)))),128))])),_:1},8,["label"]),(0,l.bF)(S,{label:(0,n.R1)(t)("page.organizes.docus.tb-label-type"),prop:"type",width:"86"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(L,{type:"info"},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(e.type),1)])),_:2},1024)])),_:1},8,["label"]),(0,l.bF)(S,{label:(0,n.R1)(t)("page.organizes.docus.tb-label-status"),width:"160"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(L,{class:(0,s.C4)("state"+e.translateState),type:fa[e.translateState]||"info"},{default:(0,l.k6)((()=>[3!==e.translateState?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.eW)((0,s.v_)((0,n.R1)(Se)[e.translateState]),1)],64)):((0,l.uX)(),(0,l.Wv)(T,{key:1,content:la[e.parserDetail]||e.parserDetail,effect:"light",placement:"top"},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)((0,n.R1)(Se)[e.translateState]),1)])),_:2},1032,["content"]))])),_:2},1032,["class","type"])])),_:1},8,["label"]),(0,l.bF)(S,{label:(0,n.R1)(t)("page.organizes.docus.tb-label-createtime"),prop:"createTime",width:"166"},null,8,["label"]),(0,l.bF)(S,{label:(0,n.R1)(t)("page.organizes.docus.tb-label-updatetime"),prop:"updateTime",width:"166"},null,8,["label"]),(0,l.bF)(S,{fixed:"right",label:(0,n.R1)(t)("page.organizes.docus.tb-label-actions"),prop:"action",width:"240"},{default:(0,l.k6)((({row:e,$index:a})=>[(0,l.Lk)("div",D,[2!=e.docType&&e.translateState>=2?((0,l.uX)(),(0,l.Wv)(u,{key:0,class:"color-huge",type:"primary",text:"",onClick:a=>Da(e)},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)((0,n.R1)(t)("page.organizes.docus.actionPreview")),1)])),_:2},1032,["onClick"])):(0,l.Q3)("",!0),4===(0,n.R1)(Ce)(e.state,e.parserState)||5===(0,n.R1)(Ce)(e.state,e.parserState)?((0,l.uX)(),(0,l.Wv)(u,{key:1,class:"color-huge",type:"primary",text:"",onClick:a=>Pa(e)},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)((0,n.R1)(t)("page.organizes.docus.actionEdit")),1)])),_:2},1032,["onClick"])):(0,l.Q3)("",!0),3===(0,n.R1)(Ce)(e.state,e.parserState)?((0,l.uX)(),(0,l.Wv)(u,{key:2,class:"color-huge",type:"primary",text:"",onClick:a=>Ua(e),loading:e.reParseLoading},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)((0,n.R1)(t)("page.organizes.docus.actionParser")),1)])),_:2},1032,["onClick","loading"])):(0,l.Q3)("",!0),2==e.docType||4!==(0,n.R1)(Ce)(e.state,e.parserState)&&5!==(0,n.R1)(Ce)(e.state,e.parserState)&&8!==(0,n.R1)(Ce)(e.state,e.parserState)?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(u,{key:3,class:"color-huge",type:"primary",onClick:a=>Wa(e),text:""},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)((0,n.R1)(t)("page.organizes.docus.actionConfirm")),1)])),_:2},1032,["onClick"])),2!=e.docType&&5===(0,n.R1)(Ce)(e.state,e.parserState)?((0,l.uX)(),(0,l.Wv)(u,{key:4,class:"color-huge",type:"primary",onClick:a=>Na(e),text:""},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)((0,n.R1)(t)("page.organizes.docus.actionSplit")),1)])),_:2},1032,["onClick"])):(0,l.Q3)("",!0),e.hide||5!==e.translateState&&7!==e.translateState&&8!==e.translateState?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(u,{key:5,loading:e.publishLoading||7===e.translateState,class:"color-huge",type:"primary",onClick:a=>Xa(e),text:""},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)((0,n.R1)(t)("page.organizes.docus.actionPublish")),1)])),_:2},1032,["loading","onClick"])),6===(0,n.R1)(Ce)(e.state,e.parserState)?((0,l.uX)(),(0,l.Wv)(u,{key:6,class:"color-huge",type:"primary",onClick:a=>Ka(e),text:""},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)((0,n.R1)(t)("page.organizes.docus.actionStop")),1)])),_:2},1032,["onClick"])):(0,l.Q3)("",!0),2!==e.translateState&&0!==e.translateState?((0,l.uX)(),(0,l.Wv)(u,{key:7,type:"info",text:"",loading:e.delLoading,onClick:t=>Ya(a,e)},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)((0,n.R1)(t)("page.organizes.docus.actionDel")),1)])),_:2},1032,["loading","onClick"])):(0,l.Q3)("",!0)])])),_:1},8,["label"])])),_:1},8,["data","loading","pagination"])):((0,l.uX)(),(0,l.Wv)(p.A,{key:1})),(0,l.bo)(((0,l.uX)(),(0,l.Wv)(Ie,{modelValue:Ge.value,"onUpdate:modelValue":a[12]||(a[12]=e=>Ge.value=e),title:(0,n.R1)(t)("page.organizes.docus.addDialogTitle"),width:"1024","close-on-click-modal":!1},{footer:(0,l.k6)((()=>[(0,l.Lk)("div",le,[(0,l.bF)(u,{onClick:a[11]||(a[11]=e=>Ge.value=!1)},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)((0,n.R1)(t)("page.organizes.docus.buttonCancel")),1)])),_:1}),(0,l.bo)(((0,l.uX)(),(0,l.Wv)(u,{disabled:0===ea.value.length,type:"primary",onClick:$a},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)((0,n.R1)(t)("page.organizes.docus.buttonSubmit")),1)])),_:1},8,["disabled"])),[[Ae,$e.value]])])])),default:(0,l.k6)((()=>[(0,l.Lk)("div",U,[(0,l.Lk)("div",N,[(0,l.bF)(Re,{model:je.value,rules:Je,ref_key:"uploadFormRef",ref:Ye,class:"uploadForm",onSubmit:a[10]||(a[10]=(0,o.D$)((()=>{}),["prevent"]))},{default:(0,l.k6)((()=>[(0,l.bF)(w,{label:(0,n.R1)(t)("page.organizes.docus.tb-label-type"),"label-position":"left",prop:"type"},{default:(0,l.k6)((()=>["2"===je.value.type?((0,l.uX)(),(0,l.CE)("div",W,[(0,l.Lk)("a",{class:"ml",href:ta.value,target:"_blank"},(0,s.v_)((0,n.R1)(t)("page.organizes.docus.downloadQALink")),9,O)])):(0,l.Q3)("",!0)])),_:1},8,["label"]),(0,l.bF)(w,{"label-width":0},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(je.value.typeStr),1)])),_:1}),(0,l.bF)(w,{label:(0,n.R1)(t)("page.organizes.docus.tb-label-lang"),"label-position":"top",prop:"lang"},null,8,["label"]),(0,l.bF)(w,{"label-width":0},{default:(0,l.k6)((()=>[(0,l.bF)(Le,{modelValue:je.value.lang,"onUpdate:modelValue":a[7]||(a[7]=e=>je.value.lang=e),name:"lang"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(ya.value,(e=>((0,l.uX)(),(0,l.Wv)(ye,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(w,{"label-position":"left",label:(0,n.R1)(t)("page.organizes.docus.tb-label-tags")},{default:(0,l.k6)((()=>[(0,l.Lk)("span",X,(0,s.v_)((0,n.R1)(t)("page.organizes.docus.dialogTagHint")),1)])),_:1},8,["label"]),(0,l.bF)(w,{"label-width":0},{default:(0,l.k6)((()=>[(0,l.bF)(k,{class:"select-tags",modelValue:je.value.tags,"onUpdate:modelValue":a[8]||(a[8]=e=>je.value.tags=e),multiple:"",clearable:"",filterable:"","allow-create":"","default-first-option":"","multiple-limit":5,"reserve-keyword":!1,onKeyup:(0,o.jR)(Fa,["enter"]),onBlur:Fa,onChange:Ra,onInput:Ca,style:{flex:"1"},placeholder:"Please select or enter tags"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",K,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(ba.value,(e=>((0,l.uX)(),(0,l.Wv)(m,{key:e,label:e,value:e},null,8,["label","value"])))),128))])])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(w,{class:"uploadForm-upload"},{default:(0,l.k6)((()=>[(0,l.bF)(Te,{"file-list":ea.value,"onUpdate:fileList":a[9]||(a[9]=e=>ea.value=e),accept:"2"===je.value.type?".xlsx":".pptx,.pdf,.md,.docx,.txt","show-file-list":!1,drag:"",multiple:"",limit:10,"before-upload":Ha,"on-exceed":Qa,"http-request":Ba},{default:(0,l.k6)((()=>[(0,l.Lk)("div",M,[(0,l.Lk)("div",V,[(0,l.bF)((0,n.R1)(d.A),{type:"pk-addplus"}),(0,l.Lk)("div",H,(0,s.v_)((0,n.R1)(t)("page.organizes.docus.uploadText")),1),(0,l.Lk)("div",Q,["1"===je.value.type?((0,l.uX)(),(0,l.CE)("span",B,"Supports docx、pdf、md、txt | ")):((0,l.uX)(),(0,l.CE)("span",q,"Supports xlsx | ")),(0,l.eW)((0,s.v_)((0,n.R1)(t)("page.organizes.docus.uploadHint")),1)])])])])),_:1},8,["file-list","accept"])])),_:1})])),_:1},8,["model","rules"])]),(0,l.Lk)("div",G,[(0,l.Lk)("div",j,[(0,l.Lk)("div",$,(0,s.v_)((0,n.R1)(t)("page.organizes.docus.uploadProgressTitle")),1),(0,l.Lk)("div",Y,(0,s.v_)((0,n.R1)(t)("page.organizes.docus.uploadProgressHint")),1)]),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(ea.value,((e,a)=>((0,l.uX)(),(0,l.CE)("div",{class:"upload-file-list",key:e.name},[(0,l.Lk)("div",J,[(0,l.bF)((0,n.R1)(d.A),{type:Va(e),class:"w24 h24 wh24"},null,8,["type"])]),(0,l.Lk)("div",Z,[(0,l.Lk)("div",ee,[(0,l.bF)(v.A,{content:e.name,placement:"top"},null,8,["content"])]),(0,l.Lk)("div",ae,(0,s.v_)((e.size/1024).toFixed(2))+"kb ",1)]),(0,l.Lk)("div",te,[(0,l.bF)((0,n.R1)(d.A),{type:"pk-delete",class:"wh16",onClick:e=>qa(a)},null,8,["onClick"])])])))),128))])])])),_:1},8,["modelValue","title"])),[[Ae,$e.value]]),(0,l.bF)(Ie,{modelValue:Be.value,"onUpdate:modelValue":a[18]||(a[18]=e=>Be.value=e),title:(0,n.R1)(t)("page.organizes.docus.editDialogTitle"),width:"600","close-on-click-modal":!1},{footer:(0,l.k6)((()=>[(0,l.Lk)("div",ne,[(0,l.bF)(u,{onClick:a[17]||(a[17]=e=>Be.value=!1)},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)((0,n.R1)(t)("page.organizes.docus.buttonCancel")),1)])),_:1}),(0,l.bF)(u,{type:"primary",onClick:xa},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)((0,n.R1)(t)("page.organizes.docus.buttonSubmit")),1)])),_:1})])])),default:(0,l.k6)((()=>[(0,l.bF)(Re,{model:qe,rules:Je,ref:"editFormRef","label-position":"top",onSubmit:a[16]||(a[16]=(0,o.D$)((()=>{}),["prevent"]))},{default:(0,l.k6)((()=>[(0,l.bF)(w,{label:(0,n.R1)(t)("page.organizes.docus.tb-label-name"),prop:"name"},{default:(0,l.k6)((()=>[(0,l.bF)(h,{maxlength:"100",modelValue:qe.name,"onUpdate:modelValue":a[13]||(a[13]=e=>qe.name=e),placeholder:(0,n.R1)(t)("page.organizes.docus.editHolder"),name:"name"},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,l.bF)(w,{label:(0,n.R1)(t)("page.organizes.docus.tb-label-lang"),prop:"lang"},{default:(0,l.k6)((()=>[(0,l.bF)(Le,{modelValue:qe.lang,"onUpdate:modelValue":a[14]||(a[14]=e=>qe.lang=e),name:"lang"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(ya.value,(e=>((0,l.uX)(),(0,l.Wv)(ye,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"]),(0,l.bF)(w,{class:"edit-form",label:(0,n.R1)(t)("page.organizes.docus.tb-label-tags")},{default:(0,l.k6)((()=>[(0,l.bF)(k,{modelValue:qe.tags,"onUpdate:modelValue":a[15]||(a[15]=e=>qe.tags=e),multiple:"",clearable:"",filterable:"","allow-create":"","default-first-option":"","multiple-limit":5,"reserve-keyword":!1,onKeyup:(0,o.jR)(Fa,["enter"]),onBlur:Fa,onChange:Ra,onInput:Ca,style:{flex:"1"},placeholder:"Please select or enter tags"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",se,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(ba.value,(e=>((0,l.uX)(),(0,l.Wv)(m,{key:e,label:e,value:e},null,8,["label","value"])))),128))])])),_:1},8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"]),(0,l.bo)((0,l.Lk)("div",{class:(0,s.C4)(["upload-state",aa.type])},[(0,l.Lk)("div",oe,[ue,(0,l.Lk)("div",ie,(0,s.v_)((0,n.R1)(t)("page.organizes.docus.uploadStateTitle")),1),(0,l.Lk)("div",re,(0,s.v_)((0,n.R1)(t)("page.organizes.docus.uploadStateSuccess",{successCount:aa.success})),1),(0,l.Lk)("div",de,(0,s.v_)((0,n.R1)(t)("page.organizes.docus.uploadStateFail",{failCount:aa.fail})),1),(0,l.Lk)("div",ce,["expand"===aa.type?((0,l.uX)(),(0,l.Wv)((0,n.R1)(d.A),{key:0,type:"pk-shrink",class:"wh16",onClick:a[19]||(a[19]=e=>aa.type="expanded")})):((0,l.uX)(),(0,l.Wv)((0,n.R1)(d.A),{key:1,type:"pk-expand",class:"wh16",onClick:a[20]||(a[20]=e=>aa.type="expand")})),(0,l.bF)((0,n.R1)(d.A),{type:"pk-knowclose",class:"wh16",onClick:a[21]||(a[21]=e=>aa.show=!1)})])]),"expand"!==aa.type?((0,l.uX)(),(0,l.CE)("div",pe,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(aa.fileList,((e,a)=>((0,l.uX)(),(0,l.CE)(l.FK,{key:e},[e?((0,l.uX)(),(0,l.CE)("div",{key:0,class:(0,s.C4)(["upload-state-list",3===(0,n.R1)(Ce)(e.state,e.parserState)?"red":""])},[(0,l.Lk)("div",ge,[(0,l.bF)((0,n.R1)(d.A),{type:Va(e),class:"w24 h24 wh24"},null,8,["type"])]),(0,l.Lk)("div",ve,[(0,l.Lk)("div",be,[(0,l.bF)(v.A,{content:e.name,placement:"top"},null,8,["content"])]),(0,l.Lk)("div",he,(0,s.v_)((e.size/1024).toFixed(2))+"kb ",1),(0,l.Lk)("div",fe,(0,s.v_)(e.uploadedAt),1)]),(0,l.Lk)("div",{class:(0,s.C4)(["state",{red:e.error}])},[(0,l.bF)(T,{content:e.error,effect:"light"},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(e.error?(0,n.R1)(t)("page.organizes.docus.uploadFail"):(0,n.R1)(Se)[(0,n.R1)(Ce)(e.state,e.parserState)]),1)])),_:2},1032,["content"])],2),(0,l.Lk)("div",me,[(0,l.bF)((0,n.R1)(d.A),{type:"pk-delete",class:"wh16",onClick:e=>Ga(a)},null,8,["onClick"])])],2)):(0,l.Q3)("",!0)],64)))),128))])):(0,l.Q3)("",!0)],2),[[o.aG,aa.show]]),(0,l.bF)(Ie,{title:Ze.docName,width:"50vw",modelValue:Ze.show,"onUpdate:modelValue":a[22]||(a[22]=e=>Ze.show=e)},{default:(0,l.k6)((()=>[(0,l.Lk)("div",ke,[(0,l.bF)(g.A,{uuid:Ze.uuid,history:Ze.history,sourceUrl:Ze.sourceUrl},null,8,["uuid","history","sourceUrl"])])])),_:1},8,["title","modelValue"])])}}}),Se=t(83940);const Le=(0,Se.A)(ye,[["__scopeId","data-v-5b60a427"]]);var Te=Le}}]);